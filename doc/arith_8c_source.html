<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>plang: arith.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>arith.c</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * plang logic programming language</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright (C) 2011  Southern Storm Software, Pty Ltd.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * The plang package is free software: you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment"> * modify it under the terms of the GNU Lesser General Public License</span>
<a name="l00007"></a>00007 <span class="comment"> * as published by the Free Software Foundation, either version 3 of</span>
<a name="l00008"></a>00008 <span class="comment"> * the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * The plang package is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment"> * GNU Lesser General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00016"></a>00016 <span class="comment"> * License along with the libcompiler library.  If not,</span>
<a name="l00017"></a>00017 <span class="comment"> * see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment"> */</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;plang/database.h&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;plang/errors.h&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;term-priv.h&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;database-priv.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;context-priv.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#ifdef HAVE_FENV_H</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#include &lt;fenv.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00134"></a>00134 <span class="comment">/* Internal expression evaluator */</span>
<a name="l00135"></a>00135 <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_eval
<a name="l00136"></a>00136     (p_context *context, p_arith_value *result,
<a name="l00137"></a>00137      p_term *expr, p_term **error)
<a name="l00138"></a>00138 {
<a name="l00139"></a>00139     expr = <a class="code" href="group__term.html#gaa914c3fb08f1a03a5a8c3cc264273174" title="Dereferences term to resolve bound variables within context.">p_term_deref_member</a>(context, expr);
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (!expr || (expr-&gt;header.type &amp; <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba2f45a5e0025d6d9b131699527dbb3ac6">P_TERM_VARIABLE</a>) != 0) {
<a name="l00141"></a>00141         *error = <a class="code" href="group__errors.html#ga1bbb29954ec42efb9771fb25c43dcd5f" title="Creates a new instantiation error term within context.">p_create_instantiation_error</a>(context);
<a name="l00142"></a>00142         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00143"></a>00143     }
<a name="l00144"></a>00144     <span class="keywordflow">switch</span> (expr-&gt;header.type) {
<a name="l00145"></a>00145     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba0b7cb4365cfdc78651f6d6d3067bf552">P_TERM_ATOM</a>: {
<a name="l00146"></a>00146         <a class="code" href="group__database.html#ga0672056a2f72570f6a3d97bdcf86be58">p_db_arith</a> func = <a class="code" href="group__database.html#gaab4de4d3f8470c0f83e28e1ba9f052d3" title="Returns the builtin arithmetic function for name and arity, or null if there is no...">p_db_builtin_arith</a>(expr, 0);
<a name="l00147"></a>00147         <span class="keywordflow">if</span> (!func)
<a name="l00148"></a>00148             <span class="keywordflow">break</span>;
<a name="l00149"></a>00149         <span class="keywordflow">return</span> (*func)(context, result, 0, 0, error); }
<a name="l00150"></a>00150     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba1eff9c0ce4d3a0c040c7b1002d23978f">P_TERM_FUNCTOR</a>: {
<a name="l00151"></a>00151         p_arith_value args[2];
<a name="l00152"></a>00152         <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> goal_result;
<a name="l00153"></a>00153         <a class="code" href="group__database.html#ga0672056a2f72570f6a3d97bdcf86be58">p_db_arith</a> func = <a class="code" href="group__database.html#gaab4de4d3f8470c0f83e28e1ba9f052d3" title="Returns the builtin arithmetic function for name and arity, or null if there is no...">p_db_builtin_arith</a>
<a name="l00154"></a>00154             (expr-&gt;functor.functor_name, (<span class="keywordtype">int</span>)(expr-&gt;header.size));
<a name="l00155"></a>00155         <span class="keywordflow">if</span> (!func)
<a name="l00156"></a>00156             <span class="keywordflow">break</span>;
<a name="l00157"></a>00157         <span class="keywordflow">if</span> (expr-&gt;header.size == 2) {
<a name="l00158"></a>00158             goal_result = p_arith_eval
<a name="l00159"></a>00159                 (context, args, expr-&gt;functor.arg[0], error);
<a name="l00160"></a>00160             <span class="keywordflow">if</span> (goal_result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00161"></a>00161                 <span class="keywordflow">return</span> goal_result;
<a name="l00162"></a>00162             goal_result = p_arith_eval
<a name="l00163"></a>00163                 (context, args + 1, expr-&gt;functor.arg[1], error);
<a name="l00164"></a>00164             <span class="keywordflow">if</span> (goal_result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00165"></a>00165                 <span class="keywordflow">return</span> goal_result;
<a name="l00166"></a>00166             <span class="keywordflow">return</span> (*func)(context, result, args, expr-&gt;functor.arg, error);
<a name="l00167"></a>00167         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expr-&gt;header.size == 1) {
<a name="l00168"></a>00168             goal_result = p_arith_eval
<a name="l00169"></a>00169                 (context, args, expr-&gt;functor.arg[0], error);
<a name="l00170"></a>00170             <span class="keywordflow">if</span> (goal_result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00171"></a>00171                 <span class="keywordflow">return</span> goal_result;
<a name="l00172"></a>00172             <span class="keywordflow">return</span> (*func)(context, result, args, expr-&gt;functor.arg, error);
<a name="l00173"></a>00173         } <span class="keywordflow">else</span> {
<a name="l00174"></a>00174             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index;
<a name="l00175"></a>00175             p_arith_value *args = GC_MALLOC
<a name="l00176"></a>00176                 (<span class="keyword">sizeof</span>(p_arith_value) * expr-&gt;header.size);
<a name="l00177"></a>00177             <span class="keywordflow">if</span> (!args)
<a name="l00178"></a>00178                 <span class="keywordflow">break</span>;
<a name="l00179"></a>00179             <span class="keywordflow">for</span> (index = 0; index &lt; expr-&gt;header.size; ++index) {
<a name="l00180"></a>00180                 goal_result = p_arith_eval
<a name="l00181"></a>00181                     (context, args + index,
<a name="l00182"></a>00182                      expr-&gt;functor.arg[index], error);
<a name="l00183"></a>00183                 <span class="keywordflow">if</span> (goal_result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00184"></a>00184                     <span class="keywordflow">return</span> goal_result;
<a name="l00185"></a>00185             }
<a name="l00186"></a>00186             goal_result = (*func)
<a name="l00187"></a>00187                 (context, result, args, expr-&gt;functor.arg, error);
<a name="l00188"></a>00188             GC_FREE(args);
<a name="l00189"></a>00189             <span class="keywordflow">return</span> goal_result;
<a name="l00190"></a>00190         }
<a name="l00191"></a>00191         <span class="keywordflow">break</span>; }
<a name="l00192"></a>00192     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>:
<a name="l00193"></a>00193         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l00194"></a>00194         result-&gt;integer_value = <a class="code" href="group__term.html#ga78f1318137be1b1714f7c51f61fe139c" title="Returns the 32-bit signed integer value within term, or zero if term is not an integer...">p_term_integer_value</a>(expr);
<a name="l00195"></a>00195         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00196"></a>00196     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>:
<a name="l00197"></a>00197         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l00198"></a>00198         result-&gt;real_value = <a class="code" href="group__term.html#ga995e38a5ad30ed0cb8b0c4e30028d39d" title="Returns the double-precision floating point value within term, or zero if term is...">p_term_real_value</a>(expr);
<a name="l00199"></a>00199         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00200"></a>00200     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>:
<a name="l00201"></a>00201         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l00202"></a>00202         result-&gt;string_value = expr;
<a name="l00203"></a>00203         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00204"></a>00204     <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206     *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;evaluable&quot;</span>, expr);
<a name="l00207"></a>00207     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00274"></a>00274 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_is
<a name="l00275"></a>00275     (p_context *context, p_term **args, p_term **error)
<a name="l00276"></a>00276 {
<a name="l00277"></a>00277     p_arith_value value;
<a name="l00278"></a>00278     <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> result;
<a name="l00279"></a>00279     p_term *value_term;
<a name="l00280"></a>00280     result = p_arith_eval(context, &amp;value, args[1], error);
<a name="l00281"></a>00281     <span class="keywordflow">if</span> (result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00282"></a>00282         <span class="keywordflow">return</span> result;
<a name="l00283"></a>00283     <span class="keywordflow">switch</span> (value.type) {
<a name="l00284"></a>00284     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>:
<a name="l00285"></a>00285         value_term = <a class="code" href="group__term.html#gaf8aa094355a33451017b76a059771247" title="Creates an integer within context with the specified value.">p_term_create_integer</a>(context, value.integer_value);
<a name="l00286"></a>00286         <span class="keywordflow">break</span>;
<a name="l00287"></a>00287     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>:
<a name="l00288"></a>00288         value_term = <a class="code" href="group__term.html#ga739432392dc4edf3fa58afe559702697" title="Creates a real within context with the specified value.">p_term_create_real</a>(context, value.real_value);
<a name="l00289"></a>00289         <span class="keywordflow">break</span>;
<a name="l00290"></a>00290     <span class="keywordflow">case</span> <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>:
<a name="l00291"></a>00291         value_term = value.string_value;
<a name="l00292"></a>00292         <span class="keywordflow">break</span>;
<a name="l00293"></a>00293     <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295     <span class="keywordflow">if</span> (<a class="code" href="group__term.html#gab4b9c1afcd3a2f29d451535f72dd71e5" title="Unifies term1 with term2 within context.">p_term_unify</a>(context, args[0], value_term, <a class="code" href="group__term.html#gadf764cbdea00d65edcd07bb9953ad2b7aecdf42bd91c99f85a757b5dfe15d319d">P_BIND_DEFAULT</a>))
<a name="l00296"></a>00296         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00297"></a>00297     <span class="keywordflow">else</span>
<a name="l00298"></a>00298         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00299"></a>00299 }
<a name="l00300"></a>00300 
<a name="l00344"></a>00344 <span class="keyword">static</span> <span class="keywordtype">int</span> p_builtin_num_cmp
<a name="l00345"></a>00345     (p_context *context, p_term **args, p_term **error)
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347     p_arith_value value1;
<a name="l00348"></a>00348     p_arith_value value2;
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (p_arith_eval(context, &amp;value1, args[0], error) != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00350"></a>00350         <span class="keywordflow">return</span> -2;
<a name="l00351"></a>00351     <span class="keywordflow">if</span> (p_arith_eval(context, &amp;value2, args[1], error) != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00352"></a>00352         <span class="keywordflow">return</span> -2;
<a name="l00353"></a>00353     <span class="keywordflow">if</span> (value1.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l00354"></a>00354         <span class="keywordflow">if</span> (value2.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l00355"></a>00355             <span class="keywordflow">if</span> (value1.integer_value &lt; value2.integer_value)
<a name="l00356"></a>00356                 <span class="keywordflow">return</span> -1;
<a name="l00357"></a>00357             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value1.integer_value &gt; value2.integer_value)
<a name="l00358"></a>00358                 <span class="keywordflow">return</span> 1;
<a name="l00359"></a>00359             <span class="keywordflow">else</span>
<a name="l00360"></a>00360                 <span class="keywordflow">return</span> 0;
<a name="l00361"></a>00361         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value2.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l00362"></a>00362             <span class="keywordtype">double</span> val1 = value1.integer_value;
<a name="l00363"></a>00363             <span class="keywordflow">if</span> (val1 &lt; value2.real_value)
<a name="l00364"></a>00364                 <span class="keywordflow">return</span> -1;
<a name="l00365"></a>00365             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (val1 &gt; value2.real_value)
<a name="l00366"></a>00366                 <span class="keywordflow">return</span> 1;
<a name="l00367"></a>00367             <span class="keywordflow">else</span>
<a name="l00368"></a>00368                 <span class="keywordflow">return</span> 0;
<a name="l00369"></a>00369         } <span class="keywordflow">else</span> {
<a name="l00370"></a>00370             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l00371"></a>00371             <span class="keywordflow">return</span> -2;
<a name="l00372"></a>00372         }
<a name="l00373"></a>00373     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value1.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (value2.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l00375"></a>00375             <span class="keywordflow">if</span> (value1.real_value &lt; value2.real_value)
<a name="l00376"></a>00376                 <span class="keywordflow">return</span> -1;
<a name="l00377"></a>00377             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value1.real_value &gt; value2.real_value)
<a name="l00378"></a>00378                 <span class="keywordflow">return</span> 1;
<a name="l00379"></a>00379             <span class="keywordflow">else</span>
<a name="l00380"></a>00380                 <span class="keywordflow">return</span> 0;
<a name="l00381"></a>00381         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value2.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l00382"></a>00382             <span class="keywordtype">double</span> val2 = value2.integer_value;
<a name="l00383"></a>00383             <span class="keywordflow">if</span> (value1.real_value &lt; val2)
<a name="l00384"></a>00384                 <span class="keywordflow">return</span> -1;
<a name="l00385"></a>00385             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value1.real_value &gt; val2)
<a name="l00386"></a>00386                 <span class="keywordflow">return</span> 1;
<a name="l00387"></a>00387             <span class="keywordflow">else</span>
<a name="l00388"></a>00388                 <span class="keywordflow">return</span> 0;
<a name="l00389"></a>00389         } <span class="keywordflow">else</span> {
<a name="l00390"></a>00390             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l00391"></a>00391             <span class="keywordflow">return</span> -2;
<a name="l00392"></a>00392         }
<a name="l00393"></a>00393     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value1.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l00394"></a>00394         <span class="keywordflow">if</span> (value2.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l00395"></a>00395             <span class="keywordtype">int</span> cmp = <a class="code" href="group__term.html#gac5ab644da0bd5f5d69d73721e38a838a" title="Compares str1 and str2 and returns a comparison code.">p_term_strcmp</a>
<a name="l00396"></a>00396                 (value1.string_value, value2.string_value);
<a name="l00397"></a>00397             <span class="keywordflow">if</span> (cmp &lt; 0)
<a name="l00398"></a>00398                 <span class="keywordflow">return</span> -1;
<a name="l00399"></a>00399             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp &gt; 0)
<a name="l00400"></a>00400                 <span class="keywordflow">return</span> 1;
<a name="l00401"></a>00401             <span class="keywordflow">else</span>
<a name="l00402"></a>00402                 <span class="keywordflow">return</span> 0;
<a name="l00403"></a>00403         } <span class="keywordflow">else</span> {
<a name="l00404"></a>00404             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[1]);
<a name="l00405"></a>00405             <span class="keywordflow">return</span> -2;
<a name="l00406"></a>00406         }
<a name="l00407"></a>00407     } <span class="keywordflow">else</span> {
<a name="l00408"></a>00408         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l00409"></a>00409         <span class="keywordflow">return</span> -2;
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411 }
<a name="l00412"></a>00412 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_eq
<a name="l00413"></a>00413     (p_context *context, p_term **args, p_term **error)
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00416"></a>00416     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00417"></a>00417         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00418"></a>00418     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp == 0)
<a name="l00419"></a>00419         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00420"></a>00420     <span class="keywordflow">else</span>
<a name="l00421"></a>00421         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00422"></a>00422 }
<a name="l00423"></a>00423 
<a name="l00470"></a>00470 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_ne
<a name="l00471"></a>00471     (p_context *context, p_term **args, p_term **error)
<a name="l00472"></a>00472 {
<a name="l00473"></a>00473     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00474"></a>00474     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00475"></a>00475         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00476"></a>00476     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp != 0)
<a name="l00477"></a>00477         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00478"></a>00478     <span class="keywordflow">else</span>
<a name="l00479"></a>00479         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00480"></a>00480 }
<a name="l00481"></a>00481 
<a name="l00527"></a>00527 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_lt
<a name="l00528"></a>00528     (p_context *context, p_term **args, p_term **error)
<a name="l00529"></a>00529 {
<a name="l00530"></a>00530     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00531"></a>00531     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00532"></a>00532         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00533"></a>00533     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp &lt; 0)
<a name="l00534"></a>00534         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00535"></a>00535     <span class="keywordflow">else</span>
<a name="l00536"></a>00536         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00537"></a>00537 }
<a name="l00538"></a>00538 
<a name="l00589"></a>00589 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_le
<a name="l00590"></a>00590     (p_context *context, p_term **args, p_term **error)
<a name="l00591"></a>00591 {
<a name="l00592"></a>00592     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00593"></a>00593     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00594"></a>00594         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00595"></a>00595     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp &lt;= 0)
<a name="l00596"></a>00596         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00597"></a>00597     <span class="keywordflow">else</span>
<a name="l00598"></a>00598         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00599"></a>00599 }
<a name="l00600"></a>00600 
<a name="l00646"></a>00646 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_gt
<a name="l00647"></a>00647     (p_context *context, p_term **args, p_term **error)
<a name="l00648"></a>00648 {
<a name="l00649"></a>00649     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00650"></a>00650     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00651"></a>00651         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00652"></a>00652     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp &gt; 0)
<a name="l00653"></a>00653         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00654"></a>00654     <span class="keywordflow">else</span>
<a name="l00655"></a>00655         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00656"></a>00656 }
<a name="l00657"></a>00657 
<a name="l00703"></a>00703 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_num_ge
<a name="l00704"></a>00704     (p_context *context, p_term **args, p_term **error)
<a name="l00705"></a>00705 {
<a name="l00706"></a>00706     <span class="keywordtype">int</span> cmp = p_builtin_num_cmp(context, args, error);
<a name="l00707"></a>00707     <span class="keywordflow">if</span> (cmp == -2)
<a name="l00708"></a>00708         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00709"></a>00709     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp &gt;= 0)
<a name="l00710"></a>00710         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00711"></a>00711     <span class="keywordflow">else</span>
<a name="l00712"></a>00712         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00713"></a>00713 }
<a name="l00714"></a>00714 
<a name="l00755"></a>00755 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_atom_name
<a name="l00756"></a>00756     (p_context *context, p_term **args, p_term **error)
<a name="l00757"></a>00757 {
<a name="l00758"></a>00758     p_term *atom = <a class="code" href="group__term.html#gaa914c3fb08f1a03a5a8c3cc264273174" title="Dereferences term to resolve bound variables within context.">p_term_deref_member</a>(context, args[0]);
<a name="l00759"></a>00759     p_term *<span class="keywordtype">string</span> = <a class="code" href="group__term.html#gaa914c3fb08f1a03a5a8c3cc264273174" title="Dereferences term to resolve bound variables within context.">p_term_deref_member</a>(context, args[1]);
<a name="l00760"></a>00760     p_term *result;
<a name="l00761"></a>00761     <span class="keywordflow">if</span> (!atom || !<span class="keywordtype">string</span>) {
<a name="l00762"></a>00762         *error = <a class="code" href="group__errors.html#ga1bbb29954ec42efb9771fb25c43dcd5f" title="Creates a new instantiation error term within context.">p_create_instantiation_error</a>(context);
<a name="l00763"></a>00763         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00764"></a>00764     }
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (atom-&gt;header.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba0b7cb4365cfdc78651f6d6d3067bf552">P_TERM_ATOM</a>) {
<a name="l00766"></a>00766         result = <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>
<a name="l00767"></a>00767             (context, <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(atom), <a class="code" href="group__term.html#ga55a861549e8b42db317a5acec3a7cefb" title="Returns the length of the name of the functor, predicate, atom, or variable contained...">p_term_name_length</a>(atom));
<a name="l00768"></a>00768         <span class="keywordflow">if</span> (<a class="code" href="group__term.html#gab4b9c1afcd3a2f29d451535f72dd71e5" title="Unifies term1 with term2 within context.">p_term_unify</a>(context, <span class="keywordtype">string</span>, result, <a class="code" href="group__term.html#gadf764cbdea00d65edcd07bb9953ad2b7aecdf42bd91c99f85a757b5dfe15d319d">P_BIND_DEFAULT</a>))
<a name="l00769"></a>00769             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00770"></a>00770         <span class="keywordflow">else</span>
<a name="l00771"></a>00771             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00772"></a>00772     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (atom-&gt;header.type &amp; <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba2f45a5e0025d6d9b131699527dbb3ac6">P_TERM_VARIABLE</a>) {
<a name="l00773"></a>00773         <span class="keywordflow">if</span> (string-&gt;header.type &amp; <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba2f45a5e0025d6d9b131699527dbb3ac6">P_TERM_VARIABLE</a>) {
<a name="l00774"></a>00774             *error = <a class="code" href="group__errors.html#ga1bbb29954ec42efb9771fb25c43dcd5f" title="Creates a new instantiation error term within context.">p_create_instantiation_error</a>(context);
<a name="l00775"></a>00775             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00776"></a>00776         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (string-&gt;header.type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l00777"></a>00777             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, <span class="keywordtype">string</span>);
<a name="l00778"></a>00778             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00779"></a>00779         }
<a name="l00780"></a>00780         result = <a class="code" href="group__term.html#ga7cdf6cb2a37ac6bd1852f52019243067" title="Creates an atom within context with the len bytes at name as its atom name.">p_term_create_atom_n</a>
<a name="l00781"></a>00781             (context, <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(<span class="keywordtype">string</span>), <a class="code" href="group__term.html#ga55a861549e8b42db317a5acec3a7cefb" title="Returns the length of the name of the functor, predicate, atom, or variable contained...">p_term_name_length</a>(<span class="keywordtype">string</span>));
<a name="l00782"></a>00782         <span class="keywordflow">if</span> (<a class="code" href="group__term.html#gab4b9c1afcd3a2f29d451535f72dd71e5" title="Unifies term1 with term2 within context.">p_term_unify</a>(context, atom, result, <a class="code" href="group__term.html#gadf764cbdea00d65edcd07bb9953ad2b7aecdf42bd91c99f85a757b5dfe15d319d">P_BIND_DEFAULT</a>))
<a name="l00783"></a>00783             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00784"></a>00784         <span class="keywordflow">else</span>
<a name="l00785"></a>00785             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00786"></a>00786     } <span class="keywordflow">else</span> {
<a name="l00787"></a>00787         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;atom&quot;</span>, atom);
<a name="l00788"></a>00788         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00789"></a>00789     }
<a name="l00790"></a>00790 }
<a name="l00791"></a>00791 
<a name="l00843"></a>00843 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_fperror
<a name="l00844"></a>00844     (p_context *context, p_term **args, p_term **error)
<a name="l00845"></a>00845 {
<a name="l00846"></a>00846     p_term *type = <a class="code" href="group__term.html#gaa914c3fb08f1a03a5a8c3cc264273174" title="Dereferences term to resolve bound variables within context.">p_term_deref_member</a>(context, args[0]);
<a name="l00847"></a>00847     <span class="keywordflow">if</span> (!type || (type-&gt;header.type &amp; <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba2f45a5e0025d6d9b131699527dbb3ac6">P_TERM_VARIABLE</a>) != 0) {
<a name="l00848"></a>00848         *error = <a class="code" href="group__errors.html#ga1bbb29954ec42efb9771fb25c43dcd5f" title="Creates a new instantiation error term within context.">p_create_instantiation_error</a>(context);
<a name="l00849"></a>00849         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851     <span class="keywordflow">if</span> (type-&gt;header.type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba0b7cb4365cfdc78651f6d6d3067bf552">P_TERM_ATOM</a>) {
<a name="l00852"></a>00852         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;atom&quot;</span>, args[0]);
<a name="l00853"></a>00853         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00854"></a>00854     }
<a name="l00855"></a>00855 <span class="preprocessor">#if defined(HAVE_FENV_H) &amp;&amp; defined(HAVE_FECLEAREXCEPT) &amp;&amp; \</span>
<a name="l00856"></a>00856 <span class="preprocessor">        defined(HAVE_FETESTEXCEPT)</span>
<a name="l00857"></a>00857 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;clear&quot;</span>)) {
<a name="l00858"></a>00858         feclearexcept(FE_ALL_EXCEPT);
<a name="l00859"></a>00859         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00860"></a>00860     } <span class="keywordflow">else</span> {
<a name="l00861"></a>00861         <span class="keywordtype">int</span> excepts = 0;
<a name="l00862"></a>00862         <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;inexact&quot;</span>))
<a name="l00863"></a>00863             excepts = FE_INEXACT;
<a name="l00864"></a>00864         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;overflow&quot;</span>))
<a name="l00865"></a>00865             excepts = FE_OVERFLOW;
<a name="l00866"></a>00866         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;undefined&quot;</span>))
<a name="l00867"></a>00867             excepts = FE_INVALID;
<a name="l00868"></a>00868         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;underflow&quot;</span>))
<a name="l00869"></a>00869             excepts = FE_UNDERFLOW;
<a name="l00870"></a>00870         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;zero_divisor&quot;</span>))
<a name="l00871"></a>00871             excepts = FE_DIVBYZERO;
<a name="l00872"></a>00872         <span class="keywordflow">else</span>
<a name="l00873"></a>00873             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00874"></a>00874         <span class="keywordflow">if</span> (fetestexcept(excepts))
<a name="l00875"></a>00875             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00876"></a>00876         <span class="keywordflow">else</span>
<a name="l00877"></a>00877             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00878"></a>00878     }
<a name="l00879"></a>00879 <span class="preprocessor">#else</span>
<a name="l00880"></a>00880 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="group__term.html#ga45ca0be88d01bae8971186c2b048aff8" title="Creates an atom within context with the specified name.">p_term_create_atom</a>(context, <span class="stringliteral">&quot;clear&quot;</span>))
<a name="l00881"></a>00881         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00882"></a>00882     <span class="keywordflow">else</span>
<a name="l00883"></a>00883         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00884"></a>00884 <span class="preprocessor">#endif</span>
<a name="l00885"></a>00885 <span class="preprocessor"></span>}
<a name="l00886"></a>00886 
<a name="l00920"></a>00920 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_isnan
<a name="l00921"></a>00921     (p_context *context, p_term **args, p_term **error)
<a name="l00922"></a>00922 {
<a name="l00923"></a>00923     p_arith_value value;
<a name="l00924"></a>00924     <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> result;
<a name="l00925"></a>00925     result = p_arith_eval(context, &amp;value, args[0], error);
<a name="l00926"></a>00926     <span class="keywordflow">if</span> (result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00927"></a>00927         <span class="keywordflow">return</span> result;
<a name="l00928"></a>00928     <span class="keywordflow">if</span> (value.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l00929"></a>00929         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00930"></a>00930     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l00931"></a>00931         <span class="keywordflow">if</span> (isnan(value.real_value))
<a name="l00932"></a>00932             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00933"></a>00933         <span class="keywordflow">else</span>
<a name="l00934"></a>00934             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00935"></a>00935     } <span class="keywordflow">else</span> {
<a name="l00936"></a>00936         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l00937"></a>00937         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00938"></a>00938     }
<a name="l00939"></a>00939 }
<a name="l00940"></a>00940 
<a name="l00978"></a>00978 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_isinf
<a name="l00979"></a>00979     (p_context *context, p_term **args, p_term **error)
<a name="l00980"></a>00980 {
<a name="l00981"></a>00981     p_arith_value value;
<a name="l00982"></a>00982     <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> result;
<a name="l00983"></a>00983     result = p_arith_eval(context, &amp;value, args[0], error);
<a name="l00984"></a>00984     <span class="keywordflow">if</span> (result != <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>)
<a name="l00985"></a>00985         <span class="keywordflow">return</span> result;
<a name="l00986"></a>00986     <span class="keywordflow">if</span> (value.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l00987"></a>00987         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00988"></a>00988     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l00989"></a>00989         <span class="keywordflow">if</span> (isinf(value.real_value) != 0)
<a name="l00990"></a>00990             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l00991"></a>00991         <span class="keywordflow">else</span>
<a name="l00992"></a>00992             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l00993"></a>00993     } <span class="keywordflow">else</span> {
<a name="l00994"></a>00994         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l00995"></a>00995         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l00996"></a>00996     }
<a name="l00997"></a>00997 }
<a name="l00998"></a>00998 
<a name="l01039"></a>01039 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_randomize_0
<a name="l01040"></a>01040     (p_context *context, p_term **args, p_term **error)
<a name="l01041"></a>01041 {
<a name="l01042"></a>01042     time_t tm;
<a name="l01043"></a>01043     time(&amp;tm);
<a name="l01044"></a>01044     context-&gt;random_seed = (<span class="keywordtype">unsigned</span> int)(tm &amp; 0x7FFFFFFF);
<a name="l01045"></a>01045     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01046"></a>01046 }
<a name="l01047"></a>01047 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_builtin_randomize_1
<a name="l01048"></a>01048     (p_context *context, p_term **args, p_term **error)
<a name="l01049"></a>01049 {
<a name="l01050"></a>01050     p_term *value = <a class="code" href="group__term.html#gaa914c3fb08f1a03a5a8c3cc264273174" title="Dereferences term to resolve bound variables within context.">p_term_deref_member</a>(context, args[0]);
<a name="l01051"></a>01051     <span class="keywordflow">if</span> (!value || (value-&gt;header.type &amp; <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba2f45a5e0025d6d9b131699527dbb3ac6">P_TERM_VARIABLE</a>) != 0) {
<a name="l01052"></a>01052         *error = <a class="code" href="group__errors.html#ga1bbb29954ec42efb9771fb25c43dcd5f" title="Creates a new instantiation error term within context.">p_create_instantiation_error</a>(context);
<a name="l01053"></a>01053         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01054"></a>01054     }
<a name="l01055"></a>01055     <span class="keywordflow">if</span> (value-&gt;header.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01056"></a>01056         context-&gt;random_seed =
<a name="l01057"></a>01057             (<span class="keywordtype">unsigned</span> int)(<a class="code" href="group__term.html#ga78f1318137be1b1714f7c51f61fe139c" title="Returns the 32-bit signed integer value within term, or zero if term is not an integer...">p_term_integer_value</a>(value) &amp; 0x7FFFFFFF);
<a name="l01058"></a>01058     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value-&gt;header.type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01059"></a>01059         <span class="keywordtype">double</span> v = <a class="code" href="group__term.html#ga995e38a5ad30ed0cb8b0c4e30028d39d" title="Returns the double-precision floating point value within term, or zero if term is...">p_term_real_value</a>(value);
<a name="l01060"></a>01060         <span class="keywordflow">if</span> (v &lt; 0.0)
<a name="l01061"></a>01061             v = -v;
<a name="l01062"></a>01062         <span class="keywordflow">if</span> (v &lt; 1.0)
<a name="l01063"></a>01063             v *= 2147483648.0;
<a name="l01064"></a>01064         context-&gt;random_seed = (<span class="keywordtype">unsigned</span> int)(((<span class="keywordtype">int</span>)v) &amp; 0x7FFFFFFF);
<a name="l01065"></a>01065     } <span class="keywordflow">else</span> {
<a name="l01066"></a>01066         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, value);
<a name="l01067"></a>01067         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01068"></a>01068     }
<a name="l01069"></a>01069     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01070"></a>01070 }
<a name="l01071"></a>01071 
<a name="l01118"></a>01118 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_add
<a name="l01119"></a>01119     (p_context *context, p_arith_value *result,
<a name="l01120"></a>01120      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01121"></a>01121 {
<a name="l01122"></a>01122     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01123"></a>01123         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01124"></a>01124             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01125"></a>01125             result-&gt;integer_value =
<a name="l01126"></a>01126                 values[0].integer_value + values[1].integer_value;
<a name="l01127"></a>01127             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01128"></a>01128         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01129"></a>01129             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01130"></a>01130             result-&gt;real_value =
<a name="l01131"></a>01131                 values[0].integer_value + values[1].real_value;
<a name="l01132"></a>01132             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01133"></a>01133         } <span class="keywordflow">else</span> {
<a name="l01134"></a>01134             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01135"></a>01135             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01136"></a>01136         }
<a name="l01137"></a>01137     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01138"></a>01138         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01139"></a>01139             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01140"></a>01140             result-&gt;real_value =
<a name="l01141"></a>01141                 values[0].real_value + values[1].real_value;
<a name="l01142"></a>01142             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01143"></a>01143         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01144"></a>01144             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01145"></a>01145             result-&gt;real_value =
<a name="l01146"></a>01146                 values[0].real_value + values[1].integer_value;
<a name="l01147"></a>01147             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01148"></a>01148         } <span class="keywordflow">else</span> {
<a name="l01149"></a>01149             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01150"></a>01150             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01151"></a>01151         }
<a name="l01152"></a>01152     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l01153"></a>01153         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l01154"></a>01154             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l01155"></a>01155             result-&gt;string_value = <a class="code" href="group__term.html#gaefa85ee27db354f5e5f4d0b213fde9cf" title="Concatenates str1 and str2 to create a new string.">p_term_concat_string</a>
<a name="l01156"></a>01156                 (context, values[0].string_value,
<a name="l01157"></a>01157                  values[1].string_value);
<a name="l01158"></a>01158             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01159"></a>01159         } <span class="keywordflow">else</span> {
<a name="l01160"></a>01160             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[1]);
<a name="l01161"></a>01161             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01162"></a>01162         }
<a name="l01163"></a>01163     } <span class="keywordflow">else</span> {
<a name="l01164"></a>01164         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0a531ecae62c7533b463c7bce4cdb96491">P_RESULT_FAIL</a>;
<a name="l01165"></a>01165     }
<a name="l01166"></a>01166 }
<a name="l01167"></a>01167 
<a name="l01213"></a>01213 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_neg
<a name="l01214"></a>01214     (p_context *context, p_arith_value *result,
<a name="l01215"></a>01215      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01216"></a>01216 {
<a name="l01217"></a>01217     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01218"></a>01218         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01219"></a>01219         result-&gt;integer_value = -(values[0].integer_value);
<a name="l01220"></a>01220         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01221"></a>01221     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01222"></a>01222         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01223"></a>01223         result-&gt;real_value = -(values[0].real_value);
<a name="l01224"></a>01224         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01225"></a>01225     } <span class="keywordflow">else</span> {
<a name="l01226"></a>01226         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01227"></a>01227         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01228"></a>01228     }
<a name="l01229"></a>01229 }
<a name="l01230"></a>01230 
<a name="l01271"></a>01271 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_sub
<a name="l01272"></a>01272     (p_context *context, p_arith_value *result,
<a name="l01273"></a>01273      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01274"></a>01274 {
<a name="l01275"></a>01275     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01276"></a>01276         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01277"></a>01277             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01278"></a>01278             result-&gt;integer_value =
<a name="l01279"></a>01279                 values[0].integer_value - values[1].integer_value;
<a name="l01280"></a>01280             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01281"></a>01281         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01282"></a>01282             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01283"></a>01283             result-&gt;real_value =
<a name="l01284"></a>01284                 values[0].integer_value - values[1].real_value;
<a name="l01285"></a>01285             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01286"></a>01286         } <span class="keywordflow">else</span> {
<a name="l01287"></a>01287             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01288"></a>01288             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01289"></a>01289         }
<a name="l01290"></a>01290     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01291"></a>01291         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01292"></a>01292             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01293"></a>01293             result-&gt;real_value =
<a name="l01294"></a>01294                 values[0].real_value - values[1].real_value;
<a name="l01295"></a>01295             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01296"></a>01296         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01297"></a>01297             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01298"></a>01298             result-&gt;real_value =
<a name="l01299"></a>01299                 values[0].real_value - values[1].integer_value;
<a name="l01300"></a>01300             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01301"></a>01301         } <span class="keywordflow">else</span> {
<a name="l01302"></a>01302             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01303"></a>01303             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01304"></a>01304         }
<a name="l01305"></a>01305     } <span class="keywordflow">else</span> {
<a name="l01306"></a>01306         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01307"></a>01307         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01308"></a>01308     }
<a name="l01309"></a>01309 }
<a name="l01310"></a>01310 
<a name="l01351"></a>01351 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mul
<a name="l01352"></a>01352     (p_context *context, p_arith_value *result,
<a name="l01353"></a>01353      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01354"></a>01354 {
<a name="l01355"></a>01355     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01356"></a>01356         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01357"></a>01357             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01358"></a>01358             result-&gt;integer_value =
<a name="l01359"></a>01359                 values[0].integer_value * values[1].integer_value;
<a name="l01360"></a>01360             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01361"></a>01361         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01362"></a>01362             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01363"></a>01363             result-&gt;real_value =
<a name="l01364"></a>01364                 values[0].integer_value * values[1].real_value;
<a name="l01365"></a>01365             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01366"></a>01366         } <span class="keywordflow">else</span> {
<a name="l01367"></a>01367             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01368"></a>01368             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01369"></a>01369         }
<a name="l01370"></a>01370     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01371"></a>01371         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01372"></a>01372             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01373"></a>01373             result-&gt;real_value =
<a name="l01374"></a>01374                 values[0].real_value * values[1].real_value;
<a name="l01375"></a>01375             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01376"></a>01376         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01377"></a>01377             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01378"></a>01378             result-&gt;real_value =
<a name="l01379"></a>01379                 values[0].real_value * values[1].integer_value;
<a name="l01380"></a>01380             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01381"></a>01381         } <span class="keywordflow">else</span> {
<a name="l01382"></a>01382             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01383"></a>01383             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01384"></a>01384         }
<a name="l01385"></a>01385     } <span class="keywordflow">else</span> {
<a name="l01386"></a>01386         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01387"></a>01387         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01388"></a>01388     }
<a name="l01389"></a>01389 }
<a name="l01390"></a>01390 
<a name="l01448"></a>01448 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_div
<a name="l01449"></a>01449     (p_context *context, p_arith_value *result,
<a name="l01450"></a>01450      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01451"></a>01451 {
<a name="l01452"></a>01452     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01453"></a>01453         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01454"></a>01454             <span class="keywordflow">if</span> (values[1].integer_value != 0) {
<a name="l01455"></a>01455                 result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01456"></a>01456                 result-&gt;integer_value =
<a name="l01457"></a>01457                     values[0].integer_value / values[1].integer_value;
<a name="l01458"></a>01458                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01459"></a>01459             }
<a name="l01460"></a>01460         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01461"></a>01461             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01462"></a>01462             result-&gt;real_value =
<a name="l01463"></a>01463                 values[0].integer_value / values[1].real_value;
<a name="l01464"></a>01464             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01465"></a>01465         } <span class="keywordflow">else</span> {
<a name="l01466"></a>01466             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01467"></a>01467             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01468"></a>01468         }
<a name="l01469"></a>01469     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01470"></a>01470         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01471"></a>01471             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01472"></a>01472             result-&gt;real_value =
<a name="l01473"></a>01473                 values[0].real_value / values[1].real_value;
<a name="l01474"></a>01474             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01475"></a>01475         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01476"></a>01476             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01477"></a>01477             result-&gt;real_value =
<a name="l01478"></a>01478                 values[0].real_value / values[1].integer_value;
<a name="l01479"></a>01479             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01480"></a>01480         } <span class="keywordflow">else</span> {
<a name="l01481"></a>01481             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01482"></a>01482             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01483"></a>01483         }
<a name="l01484"></a>01484     } <span class="keywordflow">else</span> {
<a name="l01485"></a>01485         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01486"></a>01486         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01487"></a>01487     }
<a name="l01488"></a>01488     *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;zero_divisor&quot;</span>);
<a name="l01489"></a>01489     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01490"></a>01490 }
<a name="l01491"></a>01491 
<a name="l01550"></a>01550 P_INLINE <span class="keywordtype">double</span> p_arith_fmod(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)
<a name="l01551"></a>01551 {
<a name="l01552"></a>01552 <span class="preprocessor">#if defined(HAVE_FMOD)</span>
<a name="l01553"></a>01553 <span class="preprocessor"></span>    <span class="keywordflow">return</span> fmod(x, y);
<a name="l01554"></a>01554 <span class="preprocessor">#else</span>
<a name="l01555"></a>01555 <span class="preprocessor"></span>    <span class="comment">/* Return NaN if we have no way to calculate the remainder */</span>
<a name="l01556"></a>01556     <span class="keywordflow">return</span> 0.0 / 0.0;
<a name="l01557"></a>01557 <span class="preprocessor">#endif</span>
<a name="l01558"></a>01558 <span class="preprocessor"></span>}
<a name="l01559"></a>01559 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mod
<a name="l01560"></a>01560     (p_context *context, p_arith_value *result,
<a name="l01561"></a>01561      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01562"></a>01562 {
<a name="l01563"></a>01563     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01564"></a>01564         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01565"></a>01565             <span class="keywordflow">if</span> (values[1].integer_value != 0) {
<a name="l01566"></a>01566                 result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01567"></a>01567                 result-&gt;integer_value =
<a name="l01568"></a>01568                     values[0].integer_value % values[1].integer_value;
<a name="l01569"></a>01569                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01570"></a>01570             }
<a name="l01571"></a>01571         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01572"></a>01572             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01573"></a>01573             result-&gt;real_value =
<a name="l01574"></a>01574                 p_arith_fmod(values[0].integer_value,
<a name="l01575"></a>01575                              values[1].real_value);
<a name="l01576"></a>01576             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01577"></a>01577         } <span class="keywordflow">else</span> {
<a name="l01578"></a>01578             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01579"></a>01579             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01580"></a>01580         }
<a name="l01581"></a>01581     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01582"></a>01582         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01583"></a>01583             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01584"></a>01584             result-&gt;real_value =
<a name="l01585"></a>01585                 p_arith_fmod(values[0].real_value,
<a name="l01586"></a>01586                              values[1].real_value);
<a name="l01587"></a>01587             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01588"></a>01588         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01589"></a>01589             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01590"></a>01590             result-&gt;real_value =
<a name="l01591"></a>01591                 p_arith_fmod(values[0].real_value,
<a name="l01592"></a>01592                              values[1].integer_value);
<a name="l01593"></a>01593             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01594"></a>01594         } <span class="keywordflow">else</span> {
<a name="l01595"></a>01595             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01596"></a>01596             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01597"></a>01597         }
<a name="l01598"></a>01598     } <span class="keywordflow">else</span> {
<a name="l01599"></a>01599         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01600"></a>01600         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01601"></a>01601     }
<a name="l01602"></a>01602     *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;zero_divisor&quot;</span>);
<a name="l01603"></a>01603     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01604"></a>01604 }
<a name="l01605"></a>01605 
<a name="l01662"></a>01662 P_INLINE <span class="keywordtype">double</span> p_arith_drem(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)
<a name="l01663"></a>01663 {
<a name="l01664"></a>01664 <span class="preprocessor">#if defined(HAVE_REMAINDER)</span>
<a name="l01665"></a>01665 <span class="preprocessor"></span>    <span class="keywordflow">return</span> remainder(x, y);
<a name="l01666"></a>01666 <span class="preprocessor">#elif defined(HAVE_DREM)</span>
<a name="l01667"></a>01667 <span class="preprocessor"></span>    <span class="keywordflow">return</span> drem(x, y);
<a name="l01668"></a>01668 <span class="preprocessor">#else</span>
<a name="l01669"></a>01669 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (isnan(x) || isnan(y) || y == 0.0) {
<a name="l01670"></a>01670         <span class="keywordflow">return</span> 0.0 / 0.0;
<a name="l01671"></a>01671     } <span class="keywordflow">else</span> {
<a name="l01672"></a>01672         <span class="keywordtype">double</span> quotient = x / y;
<a name="l01673"></a>01673         <span class="keywordflow">if</span> (quotient &gt;= 0.0)
<a name="l01674"></a>01674             <span class="keywordflow">return</span> x - ceil(quotient) * y;
<a name="l01675"></a>01675         <span class="keywordflow">else</span>
<a name="l01676"></a>01676             <span class="keywordflow">return</span> x - floor(quotient) * y;
<a name="l01677"></a>01677     }
<a name="l01678"></a>01678 <span class="preprocessor">#endif</span>
<a name="l01679"></a>01679 <span class="preprocessor"></span>}
<a name="l01680"></a>01680 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_rem
<a name="l01681"></a>01681     (p_context *context, p_arith_value *result,
<a name="l01682"></a>01682      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01683"></a>01683 {
<a name="l01684"></a>01684     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01685"></a>01685         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01686"></a>01686             <span class="keywordflow">if</span> (values[1].integer_value != 0) {
<a name="l01687"></a>01687                 result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01688"></a>01688                 result-&gt;integer_value =
<a name="l01689"></a>01689                     values[0].integer_value % values[1].integer_value;
<a name="l01690"></a>01690                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01691"></a>01691             }
<a name="l01692"></a>01692         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01693"></a>01693             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01694"></a>01694             result-&gt;real_value =
<a name="l01695"></a>01695                 p_arith_drem(values[0].integer_value,
<a name="l01696"></a>01696                              values[1].real_value);
<a name="l01697"></a>01697             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01698"></a>01698         } <span class="keywordflow">else</span> {
<a name="l01699"></a>01699             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01700"></a>01700             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01701"></a>01701         }
<a name="l01702"></a>01702     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01703"></a>01703         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l01704"></a>01704             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01705"></a>01705             result-&gt;real_value =
<a name="l01706"></a>01706                 p_arith_drem(values[0].real_value,
<a name="l01707"></a>01707                              values[1].real_value);
<a name="l01708"></a>01708             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01709"></a>01709         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01710"></a>01710             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l01711"></a>01711             result-&gt;real_value =
<a name="l01712"></a>01712                 p_arith_drem(values[0].real_value,
<a name="l01713"></a>01713                              values[1].integer_value);
<a name="l01714"></a>01714             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01715"></a>01715         } <span class="keywordflow">else</span> {
<a name="l01716"></a>01716             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l01717"></a>01717             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01718"></a>01718         }
<a name="l01719"></a>01719     } <span class="keywordflow">else</span> {
<a name="l01720"></a>01720         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l01721"></a>01721         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01722"></a>01722     }
<a name="l01723"></a>01723     *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;zero_divisor&quot;</span>);
<a name="l01724"></a>01724     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01725"></a>01725 }
<a name="l01726"></a>01726 
<a name="l01766"></a>01766 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_and
<a name="l01767"></a>01767     (p_context *context, p_arith_value *result,
<a name="l01768"></a>01768      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01769"></a>01769 {
<a name="l01770"></a>01770     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01771"></a>01771         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01772"></a>01772             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01773"></a>01773             result-&gt;integer_value =
<a name="l01774"></a>01774                 values[0].integer_value &amp; values[1].integer_value;
<a name="l01775"></a>01775             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01776"></a>01776         } <span class="keywordflow">else</span> {
<a name="l01777"></a>01777             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l01778"></a>01778             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01779"></a>01779         }
<a name="l01780"></a>01780     } <span class="keywordflow">else</span> {
<a name="l01781"></a>01781         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l01782"></a>01782         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01783"></a>01783     }
<a name="l01784"></a>01784 }
<a name="l01785"></a>01785 
<a name="l01825"></a>01825 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_or
<a name="l01826"></a>01826     (p_context *context, p_arith_value *result,
<a name="l01827"></a>01827      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01828"></a>01828 {
<a name="l01829"></a>01829     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01830"></a>01830         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01831"></a>01831             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01832"></a>01832             result-&gt;integer_value =
<a name="l01833"></a>01833                 values[0].integer_value | values[1].integer_value;
<a name="l01834"></a>01834             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01835"></a>01835         } <span class="keywordflow">else</span> {
<a name="l01836"></a>01836             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l01837"></a>01837             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01838"></a>01838         }
<a name="l01839"></a>01839     } <span class="keywordflow">else</span> {
<a name="l01840"></a>01840         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l01841"></a>01841         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01842"></a>01842     }
<a name="l01843"></a>01843 }
<a name="l01844"></a>01844 
<a name="l01884"></a>01884 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_xor
<a name="l01885"></a>01885     (p_context *context, p_arith_value *result,
<a name="l01886"></a>01886      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01887"></a>01887 {
<a name="l01888"></a>01888     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01889"></a>01889         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01890"></a>01890             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01891"></a>01891             result-&gt;integer_value =
<a name="l01892"></a>01892                 values[0].integer_value ^ values[1].integer_value;
<a name="l01893"></a>01893             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01894"></a>01894         } <span class="keywordflow">else</span> {
<a name="l01895"></a>01895             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l01896"></a>01896             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01897"></a>01897         }
<a name="l01898"></a>01898     } <span class="keywordflow">else</span> {
<a name="l01899"></a>01899         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l01900"></a>01900         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01901"></a>01901     }
<a name="l01902"></a>01902 }
<a name="l01903"></a>01903 
<a name="l01942"></a>01942 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_not
<a name="l01943"></a>01943     (p_context *context, p_arith_value *result,
<a name="l01944"></a>01944      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01945"></a>01945 {
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l01947"></a>01947         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l01948"></a>01948         result-&gt;integer_value = ~(values[0].integer_value);
<a name="l01949"></a>01949         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l01950"></a>01950     } <span class="keywordflow">else</span> {
<a name="l01951"></a>01951         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l01952"></a>01952         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l01953"></a>01953     }
<a name="l01954"></a>01954 }
<a name="l01955"></a>01955 
<a name="l01996"></a>01996 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_lshift
<a name="l01997"></a>01997     (p_context *context, p_arith_value *result,
<a name="l01998"></a>01998      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l01999"></a>01999 {
<a name="l02000"></a>02000     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02001"></a>02001         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02002"></a>02002             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02003"></a>02003             result-&gt;integer_value =
<a name="l02004"></a>02004                 values[0].integer_value &lt;&lt;
<a name="l02005"></a>02005                     (values[1].integer_value &amp; 31);
<a name="l02006"></a>02006             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02007"></a>02007         } <span class="keywordflow">else</span> {
<a name="l02008"></a>02008             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l02009"></a>02009             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02010"></a>02010         }
<a name="l02011"></a>02011     } <span class="keywordflow">else</span> {
<a name="l02012"></a>02012         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l02013"></a>02013         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02014"></a>02014     }
<a name="l02015"></a>02015 }
<a name="l02016"></a>02016 
<a name="l02063"></a>02063 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_rshift
<a name="l02064"></a>02064     (p_context *context, p_arith_value *result,
<a name="l02065"></a>02065      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02066"></a>02066 {
<a name="l02067"></a>02067     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02068"></a>02068         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02069"></a>02069             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02070"></a>02070             result-&gt;integer_value =
<a name="l02071"></a>02071                 values[0].integer_value &gt;&gt;
<a name="l02072"></a>02072                     (values[1].integer_value &amp; 31);
<a name="l02073"></a>02073             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02074"></a>02074         } <span class="keywordflow">else</span> {
<a name="l02075"></a>02075             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l02076"></a>02076             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02077"></a>02077         }
<a name="l02078"></a>02078     } <span class="keywordflow">else</span> {
<a name="l02079"></a>02079         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l02080"></a>02080         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02081"></a>02081     }
<a name="l02082"></a>02082 }
<a name="l02083"></a>02083 
<a name="l02123"></a>02123 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_rushift
<a name="l02124"></a>02124     (p_context *context, p_arith_value *result,
<a name="l02125"></a>02125      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02126"></a>02126 {
<a name="l02127"></a>02127     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02128"></a>02128         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02129"></a>02129             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02130"></a>02130             result-&gt;integer_value =
<a name="l02131"></a>02131                 (int)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(values[0].integer_value)) &gt;&gt;
<a name="l02132"></a>02132                             (values[1].integer_value &amp; 31));
<a name="l02133"></a>02133             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02134"></a>02134         } <span class="keywordflow">else</span> {
<a name="l02135"></a>02135             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l02136"></a>02136             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02137"></a>02137         }
<a name="l02138"></a>02138     } <span class="keywordflow">else</span> {
<a name="l02139"></a>02139         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l02140"></a>02140         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02141"></a>02141     }
<a name="l02142"></a>02142 }
<a name="l02143"></a>02143 
<a name="l02181"></a>02181 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_abs
<a name="l02182"></a>02182     (p_context *context, p_arith_value *result,
<a name="l02183"></a>02183      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02184"></a>02184 {
<a name="l02185"></a>02185     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02186"></a>02186         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02187"></a>02187         <span class="keywordflow">if</span> (values[0].integer_value == (<span class="keywordtype">int</span>)(-0x7fffffff - 1)) {
<a name="l02188"></a>02188             *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;int_overflow&quot;</span>);
<a name="l02189"></a>02189             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02190"></a>02190         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].integer_value &lt; 0) {
<a name="l02191"></a>02191             result-&gt;integer_value = -(values[0].integer_value);
<a name="l02192"></a>02192         } <span class="keywordflow">else</span> {
<a name="l02193"></a>02193             result-&gt;integer_value = values[0].integer_value;
<a name="l02194"></a>02194         }
<a name="l02195"></a>02195         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02196"></a>02196     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02197"></a>02197         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02198"></a>02198         result-&gt;real_value = fabs(values[0].real_value);
<a name="l02199"></a>02199         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02200"></a>02200     } <span class="keywordflow">else</span> {
<a name="l02201"></a>02201         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02202"></a>02202         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02203"></a>02203     }
<a name="l02204"></a>02204 }
<a name="l02205"></a>02205 
<a name="l02241"></a>02241 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_acos
<a name="l02242"></a>02242     (p_context *context, p_arith_value *result,
<a name="l02243"></a>02243      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02244"></a>02244 {
<a name="l02245"></a>02245     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02246"></a>02246         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02247"></a>02247         result-&gt;real_value = acos((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l02248"></a>02248         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02249"></a>02249     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02250"></a>02250         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02251"></a>02251         result-&gt;real_value = acos(values[0].real_value);
<a name="l02252"></a>02252         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02253"></a>02253     } <span class="keywordflow">else</span> {
<a name="l02254"></a>02254         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02255"></a>02255         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02256"></a>02256     }
<a name="l02257"></a>02257 }
<a name="l02258"></a>02258 
<a name="l02294"></a>02294 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_asin
<a name="l02295"></a>02295     (p_context *context, p_arith_value *result,
<a name="l02296"></a>02296      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02297"></a>02297 {
<a name="l02298"></a>02298     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02299"></a>02299         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02300"></a>02300         result-&gt;real_value = asin((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l02301"></a>02301         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02302"></a>02302     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02303"></a>02303         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02304"></a>02304         result-&gt;real_value = asin(values[0].real_value);
<a name="l02305"></a>02305         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02306"></a>02306     } <span class="keywordflow">else</span> {
<a name="l02307"></a>02307         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02308"></a>02308         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02309"></a>02309     }
<a name="l02310"></a>02310 }
<a name="l02311"></a>02311 
<a name="l02350"></a>02350 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_atan
<a name="l02351"></a>02351     (p_context *context, p_arith_value *result,
<a name="l02352"></a>02352      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02353"></a>02353 {
<a name="l02354"></a>02354     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02355"></a>02355         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02356"></a>02356         result-&gt;real_value = atan((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l02357"></a>02357         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02358"></a>02358     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02359"></a>02359         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02360"></a>02360         result-&gt;real_value = atan(values[0].real_value);
<a name="l02361"></a>02361         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02362"></a>02362     } <span class="keywordflow">else</span> {
<a name="l02363"></a>02363         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02364"></a>02364         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02365"></a>02365     }
<a name="l02366"></a>02366 }
<a name="l02367"></a>02367 
<a name="l02409"></a>02409 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_atan2
<a name="l02410"></a>02410     (p_context *context, p_arith_value *result,
<a name="l02411"></a>02411      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02412"></a>02412 {
<a name="l02413"></a>02413     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02414"></a>02414         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02415"></a>02415             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02416"></a>02416             result-&gt;real_value =
<a name="l02417"></a>02417                 atan2(values[0].integer_value, values[1].integer_value);
<a name="l02418"></a>02418             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02419"></a>02419         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02420"></a>02420             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02421"></a>02421             result-&gt;real_value =
<a name="l02422"></a>02422                 atan2(values[0].integer_value, values[1].real_value);
<a name="l02423"></a>02423             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02424"></a>02424         } <span class="keywordflow">else</span> {
<a name="l02425"></a>02425             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l02426"></a>02426             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02427"></a>02427         }
<a name="l02428"></a>02428     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02429"></a>02429         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02430"></a>02430             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02431"></a>02431             result-&gt;real_value =
<a name="l02432"></a>02432                 atan2(values[0].real_value, values[1].real_value);
<a name="l02433"></a>02433             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02434"></a>02434         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02435"></a>02435             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02436"></a>02436             result-&gt;real_value =
<a name="l02437"></a>02437                 atan2(values[0].real_value, values[1].integer_value);
<a name="l02438"></a>02438             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02439"></a>02439         } <span class="keywordflow">else</span> {
<a name="l02440"></a>02440             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l02441"></a>02441             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02442"></a>02442         }
<a name="l02443"></a>02443     } <span class="keywordflow">else</span> {
<a name="l02444"></a>02444         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02445"></a>02445         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02446"></a>02446     }
<a name="l02447"></a>02447 }
<a name="l02448"></a>02448 
<a name="l02491"></a>02491 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_ceil
<a name="l02492"></a>02492     (p_context *context, p_arith_value *result,
<a name="l02493"></a>02493      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02494"></a>02494 {
<a name="l02495"></a>02495     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02496"></a>02496         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02497"></a>02497         result-&gt;integer_value = values[0].integer_value;
<a name="l02498"></a>02498         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02499"></a>02499     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02500"></a>02500         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02501"></a>02501         result-&gt;real_value = ceil(values[0].real_value);
<a name="l02502"></a>02502         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02503"></a>02503     } <span class="keywordflow">else</span> {
<a name="l02504"></a>02504         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02505"></a>02505         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02506"></a>02506     }
<a name="l02507"></a>02507 }
<a name="l02508"></a>02508 
<a name="l02547"></a>02547 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_byte
<a name="l02548"></a>02548     (p_context *context, p_arith_value *result,
<a name="l02549"></a>02549      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02550"></a>02550 {
<a name="l02551"></a>02551     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l02552"></a>02552         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02553"></a>02553             <span class="keywordtype">int</span> index = values[1].integer_value;
<a name="l02554"></a>02554             <span class="keywordflow">if</span> (index &gt;= 0 &amp;&amp;
<a name="l02555"></a>02555                     index &lt; (<span class="keywordtype">int</span>)(values[0].string_value-&gt;header.size)) {
<a name="l02556"></a>02556                 result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02557"></a>02557                 result-&gt;integer_value =
<a name="l02558"></a>02558                     (int)((<a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(values[0].string_value))[index]
<a name="l02559"></a>02559                             &amp; 0xFF);
<a name="l02560"></a>02560                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02561"></a>02561             } <span class="keywordflow">else</span> {
<a name="l02562"></a>02562                 *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l02563"></a>02563                     (context, <span class="stringliteral">&quot;string_index&quot;</span>, args[1]);
<a name="l02564"></a>02564                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02565"></a>02565             }
<a name="l02566"></a>02566         } <span class="keywordflow">else</span> {
<a name="l02567"></a>02567             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l02568"></a>02568             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02569"></a>02569         }
<a name="l02570"></a>02570     } <span class="keywordflow">else</span> {
<a name="l02571"></a>02571         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l02572"></a>02572         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02573"></a>02573     }
<a name="l02574"></a>02574 }
<a name="l02575"></a>02575 
<a name="l02610"></a>02610 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_byte_to_string
<a name="l02611"></a>02611     (p_context *context, p_arith_value *result,
<a name="l02612"></a>02612      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02613"></a>02613 {
<a name="l02614"></a>02614     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02615"></a>02615         <span class="keywordtype">int</span> ch = values[0].integer_value;
<a name="l02616"></a>02616         <span class="keywordflow">if</span> (ch &gt;= 0 &amp;&amp; ch &lt;= 255) {
<a name="l02617"></a>02617             <span class="keywordtype">char</span> str[1];
<a name="l02618"></a>02618             str[0] = (char)ch;
<a name="l02619"></a>02619             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l02620"></a>02620             result-&gt;string_value =
<a name="l02621"></a>02621                 <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>(context, str, 1);
<a name="l02622"></a>02622             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02623"></a>02623         } <span class="keywordflow">else</span> {
<a name="l02624"></a>02624             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;byte&quot;</span>, args[0]);
<a name="l02625"></a>02625             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02626"></a>02626         }
<a name="l02627"></a>02627     } <span class="keywordflow">else</span> {
<a name="l02628"></a>02628         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l02629"></a>02629         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02630"></a>02630     }
<a name="l02631"></a>02631 }
<a name="l02632"></a>02632 
<a name="l02674"></a>02674 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_char
<a name="l02675"></a>02675     (p_context *context, p_arith_value *result,
<a name="l02676"></a>02676      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02677"></a>02677 {
<a name="l02678"></a>02678     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l02679"></a>02679         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02680"></a>02680             <span class="keywordtype">int</span> index = values[1].integer_value;
<a name="l02681"></a>02681             <span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(values[0].string_value);
<a name="l02682"></a>02682             <span class="keywordtype">size_t</span> len = <a class="code" href="group__term.html#ga55a861549e8b42db317a5acec3a7cefb" title="Returns the length of the name of the functor, predicate, atom, or variable contained...">p_term_name_length</a>(values[0].string_value);
<a name="l02683"></a>02683             <span class="keywordtype">size_t</span> size;
<a name="l02684"></a>02684             <span class="keywordtype">int</span> ch;
<a name="l02685"></a>02685             <span class="keywordflow">while</span> (index &gt; 0 &amp;&amp; len &gt; 0) {
<a name="l02686"></a>02686                 ch = _p_term_next_utf8(str, len, &amp;size);
<a name="l02687"></a>02687                 str += size;
<a name="l02688"></a>02688                 len -= size;
<a name="l02689"></a>02689                 --index;
<a name="l02690"></a>02690             }
<a name="l02691"></a>02691             <span class="keywordflow">if</span> (index == 0 &amp;&amp; len &gt; 0) {
<a name="l02692"></a>02692                 ch = _p_term_next_utf8(str, len, &amp;size);
<a name="l02693"></a>02693                 result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l02694"></a>02694                 result-&gt;integer_value = ch;
<a name="l02695"></a>02695                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02696"></a>02696             } <span class="keywordflow">else</span> {
<a name="l02697"></a>02697                 *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l02698"></a>02698                     (context, <span class="stringliteral">&quot;string_index&quot;</span>, args[1]);
<a name="l02699"></a>02699                 <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02700"></a>02700             }
<a name="l02701"></a>02701         } <span class="keywordflow">else</span> {
<a name="l02702"></a>02702             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l02703"></a>02703             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02704"></a>02704         }
<a name="l02705"></a>02705     } <span class="keywordflow">else</span> {
<a name="l02706"></a>02706         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l02707"></a>02707         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02708"></a>02708     }
<a name="l02709"></a>02709 }
<a name="l02710"></a>02710 
<a name="l02745"></a>02745 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_char_to_string
<a name="l02746"></a>02746     (p_context *context, p_arith_value *result,
<a name="l02747"></a>02747      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02748"></a>02748 {
<a name="l02749"></a>02749     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02750"></a>02750         <span class="keywordtype">int</span> ch = values[0].integer_value;
<a name="l02751"></a>02751         <span class="keywordflow">if</span> (ch &gt;= 0 &amp;&amp; ch &lt;= 0x10FFFF) {
<a name="l02752"></a>02752             <span class="keywordtype">char</span> str[4];
<a name="l02753"></a>02753             <span class="keywordtype">size_t</span> len;
<a name="l02754"></a>02754             <span class="keywordflow">if</span> (ch &lt; 0x80) {
<a name="l02755"></a>02755                 str[0] = (char)ch;
<a name="l02756"></a>02756                 len = 1;
<a name="l02757"></a>02757             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (1 &lt;&lt; (5 + 6))) {
<a name="l02758"></a>02758                 str[0] = (char)(0xC0 | (ch &gt;&gt; 6));
<a name="l02759"></a>02759                 str[1] = (char)(0x80 | (ch &amp; 0x3F));
<a name="l02760"></a>02760                 len = 2;
<a name="l02761"></a>02761             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch &lt; (1 &lt;&lt; (4 + 6 + 6))) {
<a name="l02762"></a>02762                 str[0] = (char)(0xE0 | (ch &gt;&gt; 12));
<a name="l02763"></a>02763                 str[1] = (char)(0x80 | ((ch &gt;&gt; 6) &amp; 0x3F));
<a name="l02764"></a>02764                 str[2] = (char)(0x80 | (ch &amp; 0x3F));
<a name="l02765"></a>02765                 len = 3;
<a name="l02766"></a>02766             } <span class="keywordflow">else</span> {
<a name="l02767"></a>02767                 str[0] = (char)(0xF0 | (ch &gt;&gt; 18));
<a name="l02768"></a>02768                 str[1] = (char)(0x80 | ((ch &gt;&gt; 12) &amp; 0x3F));
<a name="l02769"></a>02769                 str[2] = (char)(0x80 | ((ch &gt;&gt; 6) &amp; 0x3F));
<a name="l02770"></a>02770                 str[3] = (char)(0x80 | (ch &amp; 0x3F));
<a name="l02771"></a>02771                 len = 4;
<a name="l02772"></a>02772             }
<a name="l02773"></a>02773             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l02774"></a>02774             result-&gt;string_value =
<a name="l02775"></a>02775                 <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>(context, str, len);
<a name="l02776"></a>02776             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02777"></a>02777         } <span class="keywordflow">else</span> {
<a name="l02778"></a>02778             *error = <a class="code" href="group__errors.html#gae27c2667bd7119b0400eb1bc7f7b71a3" title="Creates a new representation error term from flag within context.">p_create_representation_error</a>
<a name="l02779"></a>02779                 (context, <span class="stringliteral">&quot;character_code&quot;</span>);
<a name="l02780"></a>02780             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02781"></a>02781         }
<a name="l02782"></a>02782     } <span class="keywordflow">else</span> {
<a name="l02783"></a>02783         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l02784"></a>02784         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02785"></a>02785     }
<a name="l02786"></a>02786 }
<a name="l02787"></a>02787 
<a name="l02827"></a>02827 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_cos
<a name="l02828"></a>02828     (p_context *context, p_arith_value *result,
<a name="l02829"></a>02829      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02830"></a>02830 {
<a name="l02831"></a>02831     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02832"></a>02832         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02833"></a>02833         result-&gt;real_value = cos((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l02834"></a>02834         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02835"></a>02835     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02836"></a>02836         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02837"></a>02837         result-&gt;real_value = cos(values[0].real_value);
<a name="l02838"></a>02838         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02839"></a>02839     } <span class="keywordflow">else</span> {
<a name="l02840"></a>02840         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02841"></a>02841         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02842"></a>02842     }
<a name="l02843"></a>02843 }
<a name="l02844"></a>02844 
<a name="l02884"></a>02884 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_exp
<a name="l02885"></a>02885     (p_context *context, p_arith_value *result,
<a name="l02886"></a>02886      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02887"></a>02887 {
<a name="l02888"></a>02888     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02889"></a>02889         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02890"></a>02890         result-&gt;real_value = exp((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l02891"></a>02891         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02892"></a>02892     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02893"></a>02893         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02894"></a>02894         result-&gt;real_value = exp(values[0].real_value);
<a name="l02895"></a>02895         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02896"></a>02896     } <span class="keywordflow">else</span> {
<a name="l02897"></a>02897         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02898"></a>02898         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02899"></a>02899     }
<a name="l02900"></a>02900 }
<a name="l02901"></a>02901 
<a name="l02925"></a>02925 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_e
<a name="l02926"></a>02926     (p_context *context, p_arith_value *result,
<a name="l02927"></a>02927      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02928"></a>02928 {
<a name="l02929"></a>02929     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02930"></a>02930     result-&gt;real_value = 2.7182818284590452354;
<a name="l02931"></a>02931     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02932"></a>02932 }
<a name="l02933"></a>02933 
<a name="l02965"></a>02965 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_float
<a name="l02966"></a>02966     (p_context *context, p_arith_value *result,
<a name="l02967"></a>02967      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l02968"></a>02968 {
<a name="l02969"></a>02969     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l02970"></a>02970         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02971"></a>02971         result-&gt;real_value = values[0].integer_value;
<a name="l02972"></a>02972         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02973"></a>02973     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l02974"></a>02974         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02975"></a>02975         result-&gt;real_value = values[0].real_value;
<a name="l02976"></a>02976         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02977"></a>02977     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l02978"></a>02978         <span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(values[0].string_value);
<a name="l02979"></a>02979         <span class="keywordtype">char</span> *endptr;
<a name="l02980"></a>02980         <span class="keywordtype">double</span> val;
<a name="l02981"></a>02981         errno = 0;
<a name="l02982"></a>02982         val = strtod(str, &amp;endptr);
<a name="l02983"></a>02983         <span class="keywordflow">if</span> (errno == ERANGE || endptr == str) {
<a name="l02984"></a>02984             <span class="comment">/* No conversion performed or value is out of range */</span>
<a name="l02985"></a>02985             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02986"></a>02986             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02987"></a>02987         }
<a name="l02988"></a>02988         <span class="keywordflow">while</span> (*endptr == <span class="charliteral">&apos; &apos;</span> || *endptr == <span class="charliteral">&apos;\t&apos;</span> ||
<a name="l02989"></a>02989                *endptr == <span class="charliteral">&apos;\r&apos;</span> || *endptr == <span class="charliteral">&apos;\n&apos;</span>)
<a name="l02990"></a>02990             ++endptr;
<a name="l02991"></a>02991         <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&apos;\0&apos;</span>) {
<a name="l02992"></a>02992             <span class="comment">/* Trailing characters other than whitespace */</span>
<a name="l02993"></a>02993             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l02994"></a>02994             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l02995"></a>02995         }
<a name="l02996"></a>02996         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l02997"></a>02997         result-&gt;real_value = val;
<a name="l02998"></a>02998         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l02999"></a>02999     } <span class="keywordflow">else</span> {
<a name="l03000"></a>03000         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l03001"></a>03001         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03002"></a>03002     }
<a name="l03003"></a>03003 }
<a name="l03004"></a>03004 
<a name="l03042"></a>03042 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_float_fractional_part
<a name="l03043"></a>03043     (p_context *context, p_arith_value *result,
<a name="l03044"></a>03044      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03045"></a>03045 {
<a name="l03046"></a>03046     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03047"></a>03047         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03048"></a>03048         result-&gt;integer_value = 0;
<a name="l03049"></a>03049         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03050"></a>03050     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l03051"></a>03051         <span class="keywordtype">double</span> ipart;
<a name="l03052"></a>03052         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03053"></a>03053         result-&gt;real_value = modf(values[0].real_value, &amp;ipart);
<a name="l03054"></a>03054         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03055"></a>03055     } <span class="keywordflow">else</span> {
<a name="l03056"></a>03056         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l03057"></a>03057         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03058"></a>03058     }
<a name="l03059"></a>03059 }
<a name="l03060"></a>03060 
<a name="l03098"></a>03098 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_float_integer_part
<a name="l03099"></a>03099     (p_context *context, p_arith_value *result,
<a name="l03100"></a>03100      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03101"></a>03101 {
<a name="l03102"></a>03102     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03103"></a>03103         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03104"></a>03104         result-&gt;integer_value = values[0].integer_value;
<a name="l03105"></a>03105         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03106"></a>03106     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l03107"></a>03107         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03108"></a>03108         modf(values[0].real_value, &amp;(result-&gt;real_value));
<a name="l03109"></a>03109         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03110"></a>03110     } <span class="keywordflow">else</span> {
<a name="l03111"></a>03111         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l03112"></a>03112         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03113"></a>03113     }
<a name="l03114"></a>03114 }
<a name="l03115"></a>03115 
<a name="l03154"></a>03154 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_floor
<a name="l03155"></a>03155     (p_context *context, p_arith_value *result,
<a name="l03156"></a>03156      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03157"></a>03157 {
<a name="l03158"></a>03158     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03159"></a>03159         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03160"></a>03160         result-&gt;integer_value = values[0].integer_value;
<a name="l03161"></a>03161         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03162"></a>03162     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l03163"></a>03163         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03164"></a>03164         result-&gt;real_value = floor(values[0].real_value);
<a name="l03165"></a>03165         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03166"></a>03166     } <span class="keywordflow">else</span> {
<a name="l03167"></a>03167         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l03168"></a>03168         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03169"></a>03169     }
<a name="l03170"></a>03170 }
<a name="l03171"></a>03171 
<a name="l03197"></a>03197 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_inf
<a name="l03198"></a>03198     (p_context *context, p_arith_value *result,
<a name="l03199"></a>03199      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03200"></a>03200 {
<a name="l03201"></a>03201     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03202"></a>03202     result-&gt;real_value = 1.0 / 0.0;
<a name="l03203"></a>03203     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03204"></a>03204 }
<a name="l03205"></a>03205 
<a name="l03252"></a>03252 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_integer
<a name="l03253"></a>03253     (p_context *context, p_arith_value *result,
<a name="l03254"></a>03254      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03255"></a>03255 {
<a name="l03256"></a>03256     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03257"></a>03257         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03258"></a>03258         result-&gt;integer_value = values[0].integer_value;
<a name="l03259"></a>03259         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03260"></a>03260     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l03261"></a>03261         <span class="keywordflow">if</span> (values[0].real_value &gt;= 2147483648.0 ||
<a name="l03262"></a>03262                 values[0].real_value &lt;= -2147483649.0) {
<a name="l03263"></a>03263             *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;int_overflow&quot;</span>);
<a name="l03264"></a>03264             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03265"></a>03265         }
<a name="l03266"></a>03266         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03267"></a>03267         result-&gt;integer_value = (int)(values[0].real_value);
<a name="l03268"></a>03268         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03269"></a>03269     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03270"></a>03270         <span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(values[0].string_value);
<a name="l03271"></a>03271         <span class="keywordtype">char</span> *endptr;
<a name="l03272"></a>03272         <span class="keywordtype">long</span> val;
<a name="l03273"></a>03273         errno = 0;
<a name="l03274"></a>03274         val = strtol(str, &amp;endptr, 0);
<a name="l03275"></a>03275         <span class="keywordflow">if</span> (errno == ERANGE) {
<a name="l03276"></a>03276             <span class="comment">/* Value is out of range */</span>
<a name="l03277"></a>03277             *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;int_overflow&quot;</span>);
<a name="l03278"></a>03278             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03279"></a>03279         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (endptr == str) {
<a name="l03280"></a>03280             <span class="comment">/* No conversion performed - data is not an integer */</span>
<a name="l03281"></a>03281             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l03282"></a>03282             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03283"></a>03283         }
<a name="l03284"></a>03284         <span class="keywordflow">while</span> (*endptr == <span class="charliteral">&apos; &apos;</span> || *endptr == <span class="charliteral">&apos;\t&apos;</span> ||
<a name="l03285"></a>03285                *endptr == <span class="charliteral">&apos;\r&apos;</span> || *endptr == <span class="charliteral">&apos;\n&apos;</span>)
<a name="l03286"></a>03286             ++endptr;
<a name="l03287"></a>03287         <span class="keywordflow">if</span> (*endptr != <span class="charliteral">&apos;\0&apos;</span>) {
<a name="l03288"></a>03288             <span class="comment">/* Trailing characters other than whitespace */</span>
<a name="l03289"></a>03289             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l03290"></a>03290             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03291"></a>03291         }
<a name="l03292"></a>03292         <span class="keywordflow">if</span> (val != (<span class="keywordtype">int</span>)val) {
<a name="l03293"></a>03293             <span class="comment">/* Value is out of range for a 32-bit integer */</span>
<a name="l03294"></a>03294             *error = <a class="code" href="group__errors.html#gaef3ab6fa1c4995e1ec42eb8dc9d672af" title="Creates a new evaluation error term from eval_type within context.">p_create_evaluation_error</a>(context, <span class="stringliteral">&quot;int_overflow&quot;</span>);
<a name="l03295"></a>03295             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03296"></a>03296         }
<a name="l03297"></a>03297         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03298"></a>03298         result-&gt;integer_value = (int)val;
<a name="l03299"></a>03299         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03300"></a>03300     } <span class="keywordflow">else</span> {
<a name="l03301"></a>03301         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[0]);
<a name="l03302"></a>03302         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03303"></a>03303     }
<a name="l03304"></a>03304 }
<a name="l03305"></a>03305 
<a name="l03347"></a>03347 <span class="keyword">static</span> p_term *p_arith_mid
<a name="l03348"></a>03348     (p_context *context, p_term *str, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start,
<a name="l03349"></a>03349      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length)
<a name="l03350"></a>03350 {
<a name="l03351"></a>03351     <span class="keywordtype">size_t</span> slen = <a class="code" href="group__term.html#gab6582e252c8a8333f4b03560f715e5fd" title="Returns the UTF-8 length of the name of the functor, predicate, atom, or variable...">p_term_name_length_utf8</a>(str);
<a name="l03352"></a>03352     <span class="keyword">const</span> <span class="keywordtype">char</span> *sstart;
<a name="l03353"></a>03353     <span class="keyword">const</span> <span class="keywordtype">char</span> *sposn;
<a name="l03354"></a>03354     <span class="keywordtype">size_t</span> ch_size;
<a name="l03355"></a>03355     <span class="keywordflow">if</span> (!slen)
<a name="l03356"></a>03356         <span class="keywordflow">return</span> str;
<a name="l03357"></a>03357     <span class="keywordflow">if</span> (start &gt;= slen)
<a name="l03358"></a>03358         <span class="keywordflow">return</span> <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>(context, <span class="stringliteral">&quot;&quot;</span>, 0);
<a name="l03359"></a>03359     <span class="keywordflow">if</span> (start == 0 &amp;&amp; length &gt;= slen)
<a name="l03360"></a>03360         <span class="keywordflow">return</span> str;
<a name="l03361"></a>03361     <span class="keywordflow">if</span> (length &gt; (slen - start))
<a name="l03362"></a>03362         length = (<span class="keywordtype">unsigned</span> int)(slen - start);
<a name="l03363"></a>03363     sstart = <a class="code" href="group__term.html#gacb7b346b3f8f4a9fa31c3285eb615777" title="Returns the name of the functor, predicate, atom, or variable contained in term,...">p_term_name</a>(str);
<a name="l03364"></a>03364     <span class="keywordflow">while</span> (slen &gt; 0 &amp;&amp; start &gt; 0) {
<a name="l03365"></a>03365         _p_term_next_utf8(sstart, slen, &amp;ch_size);
<a name="l03366"></a>03366         sstart += ch_size;
<a name="l03367"></a>03367         --slen;
<a name="l03368"></a>03368         --start;
<a name="l03369"></a>03369     }
<a name="l03370"></a>03370     sposn = sstart;
<a name="l03371"></a>03371     <span class="keywordflow">while</span> (slen &gt; 0 &amp;&amp; length &gt; 0) {
<a name="l03372"></a>03372         _p_term_next_utf8(sposn, slen, &amp;ch_size);
<a name="l03373"></a>03373         sposn += ch_size;
<a name="l03374"></a>03374         --slen;
<a name="l03375"></a>03375         --length;
<a name="l03376"></a>03376     }
<a name="l03377"></a>03377     <span class="keywordflow">return</span> <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>(context, sstart, sposn - sstart);
<a name="l03378"></a>03378 }
<a name="l03379"></a>03379 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_left
<a name="l03380"></a>03380     (p_context *context, p_arith_value *result,
<a name="l03381"></a>03381      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03382"></a>03382 {
<a name="l03383"></a>03383     p_term *str;
<a name="l03384"></a>03384     <span class="keywordtype">int</span> length;
<a name="l03385"></a>03385     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03386"></a>03386         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03387"></a>03387         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03388"></a>03388     }
<a name="l03389"></a>03389     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03390"></a>03390         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03391"></a>03391         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03392"></a>03392     }
<a name="l03393"></a>03393     str = values[0].string_value;
<a name="l03394"></a>03394     length = values[1].integer_value;
<a name="l03395"></a>03395     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l03396"></a>03396         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03397"></a>03397             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03398"></a>03398         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03399"></a>03399     }
<a name="l03400"></a>03400     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03401"></a>03401     result-&gt;string_value = p_arith_mid
<a name="l03402"></a>03402         (context, str, 0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l03403"></a>03403     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03404"></a>03404 }
<a name="l03405"></a>03405 
<a name="l03447"></a>03447 <span class="keyword">static</span> p_term *p_arith_mid_bytes
<a name="l03448"></a>03448     (p_context *context, p_term *str, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start,
<a name="l03449"></a>03449      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length)
<a name="l03450"></a>03450 {
<a name="l03451"></a>03451     <span class="keywordflow">if</span> (!str-&gt;header.size)
<a name="l03452"></a>03452         <span class="keywordflow">return</span> str;
<a name="l03453"></a>03453     <span class="keywordflow">if</span> (start &gt;= str-&gt;header.size)
<a name="l03454"></a>03454         <span class="keywordflow">return</span> <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>(context, <span class="stringliteral">&quot;&quot;</span>, 0);
<a name="l03455"></a>03455     <span class="keywordflow">if</span> (start == 0 &amp;&amp; length &gt;= str-&gt;header.size)
<a name="l03456"></a>03456         <span class="keywordflow">return</span> str;
<a name="l03457"></a>03457     <span class="keywordflow">if</span> (length &gt; (str-&gt;header.size - start))
<a name="l03458"></a>03458         length = str-&gt;header.size - start;
<a name="l03459"></a>03459     <span class="keywordflow">return</span> <a class="code" href="group__term.html#ga8c7104a045903c1d9c5fa56881e9d9f1" title="Creates a string within context with the len bytes from the specified str buffer...">p_term_create_string_n</a>
<a name="l03460"></a>03460         (context, str-&gt;string.name + start, length);
<a name="l03461"></a>03461 }
<a name="l03462"></a>03462 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_left_bytes
<a name="l03463"></a>03463     (p_context *context, p_arith_value *result,
<a name="l03464"></a>03464      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03465"></a>03465 {
<a name="l03466"></a>03466     p_term *str;
<a name="l03467"></a>03467     <span class="keywordtype">int</span> length;
<a name="l03468"></a>03468     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03469"></a>03469         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03470"></a>03470         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03471"></a>03471     }
<a name="l03472"></a>03472     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03473"></a>03473         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03474"></a>03474         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03475"></a>03475     }
<a name="l03476"></a>03476     str = values[0].string_value;
<a name="l03477"></a>03477     length = values[1].integer_value;
<a name="l03478"></a>03478     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l03479"></a>03479         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03480"></a>03480             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03481"></a>03481         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03482"></a>03482     }
<a name="l03483"></a>03483     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03484"></a>03484     result-&gt;string_value = p_arith_mid_bytes
<a name="l03485"></a>03485         (context, str, 0, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l03486"></a>03486     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03487"></a>03487 }
<a name="l03488"></a>03488 
<a name="l03521"></a>03521 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_length
<a name="l03522"></a>03522     (p_context *context, p_arith_value *result,
<a name="l03523"></a>03523      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03524"></a>03524 {
<a name="l03525"></a>03525     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03526"></a>03526         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03527"></a>03527         result-&gt;integer_value = (int)
<a name="l03528"></a>03528             <a class="code" href="group__term.html#gab6582e252c8a8333f4b03560f715e5fd" title="Returns the UTF-8 length of the name of the functor, predicate, atom, or variable...">p_term_name_length_utf8</a>(values[0].string_value);
<a name="l03529"></a>03529         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03530"></a>03530     } <span class="keywordflow">else</span> {
<a name="l03531"></a>03531         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03532"></a>03532         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03533"></a>03533     }
<a name="l03534"></a>03534 }
<a name="l03535"></a>03535 
<a name="l03567"></a>03567 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_length_bytes
<a name="l03568"></a>03568     (p_context *context, p_arith_value *result,
<a name="l03569"></a>03569      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03570"></a>03570 {
<a name="l03571"></a>03571     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03572"></a>03572         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l03573"></a>03573         result-&gt;integer_value = (int)
<a name="l03574"></a>03574             <a class="code" href="group__term.html#ga55a861549e8b42db317a5acec3a7cefb" title="Returns the length of the name of the functor, predicate, atom, or variable contained...">p_term_name_length</a>(values[0].string_value);
<a name="l03575"></a>03575         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03576"></a>03576     } <span class="keywordflow">else</span> {
<a name="l03577"></a>03577         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03578"></a>03578         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03579"></a>03579     }
<a name="l03580"></a>03580 }
<a name="l03581"></a>03581 
<a name="l03622"></a>03622 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_log
<a name="l03623"></a>03623     (p_context *context, p_arith_value *result,
<a name="l03624"></a>03624      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03625"></a>03625 {
<a name="l03626"></a>03626     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03627"></a>03627         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03628"></a>03628         result-&gt;real_value = log((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l03629"></a>03629         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03630"></a>03630     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l03631"></a>03631         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03632"></a>03632         result-&gt;real_value = log(values[0].real_value);
<a name="l03633"></a>03633         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03634"></a>03634     } <span class="keywordflow">else</span> {
<a name="l03635"></a>03635         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l03636"></a>03636         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03637"></a>03637     }
<a name="l03638"></a>03638 }
<a name="l03639"></a>03639 
<a name="l03698"></a>03698 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mid_2
<a name="l03699"></a>03699     (p_context *context, p_arith_value *result,
<a name="l03700"></a>03700      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03701"></a>03701 {
<a name="l03702"></a>03702     p_term *str;
<a name="l03703"></a>03703     <span class="keywordtype">int</span> start;
<a name="l03704"></a>03704     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03705"></a>03705         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03706"></a>03706         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03707"></a>03707     }
<a name="l03708"></a>03708     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03709"></a>03709         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03710"></a>03710         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03711"></a>03711     }
<a name="l03712"></a>03712     str = values[0].string_value;
<a name="l03713"></a>03713     start = values[1].integer_value;
<a name="l03714"></a>03714     <span class="keywordflow">if</span> (start &lt; 0) {
<a name="l03715"></a>03715         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03716"></a>03716             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03717"></a>03717         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03718"></a>03718     }
<a name="l03719"></a>03719     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03720"></a>03720     result-&gt;string_value = p_arith_mid
<a name="l03721"></a>03721         (context, str, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)start, str-&gt;header.size);
<a name="l03722"></a>03722     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03723"></a>03723 }
<a name="l03724"></a>03724 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mid_3
<a name="l03725"></a>03725     (p_context *context, p_arith_value *result,
<a name="l03726"></a>03726      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03727"></a>03727 {
<a name="l03728"></a>03728     p_term *str;
<a name="l03729"></a>03729     <span class="keywordtype">int</span> start;
<a name="l03730"></a>03730     <span class="keywordtype">int</span> length;
<a name="l03731"></a>03731     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03732"></a>03732         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03733"></a>03733         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03734"></a>03734     }
<a name="l03735"></a>03735     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03736"></a>03736         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03737"></a>03737         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03738"></a>03738     }
<a name="l03739"></a>03739     <span class="keywordflow">if</span> (values[2].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03740"></a>03740         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[2]);
<a name="l03741"></a>03741         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03742"></a>03742     }
<a name="l03743"></a>03743     str = values[0].string_value;
<a name="l03744"></a>03744     start = values[1].integer_value;
<a name="l03745"></a>03745     length = values[2].integer_value;
<a name="l03746"></a>03746     <span class="keywordflow">if</span> (start &lt; 0) {
<a name="l03747"></a>03747         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03748"></a>03748             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03749"></a>03749         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03750"></a>03750     }
<a name="l03751"></a>03751     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l03752"></a>03752         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03753"></a>03753             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[2]);
<a name="l03754"></a>03754         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03755"></a>03755     }
<a name="l03756"></a>03756     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03757"></a>03757     result-&gt;string_value = p_arith_mid
<a name="l03758"></a>03758         (context, str, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)start, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l03759"></a>03759     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03760"></a>03760 }
<a name="l03761"></a>03761 
<a name="l03823"></a>03823 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mid_bytes_2
<a name="l03824"></a>03824     (p_context *context, p_arith_value *result,
<a name="l03825"></a>03825      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03826"></a>03826 {
<a name="l03827"></a>03827     p_term *str;
<a name="l03828"></a>03828     <span class="keywordtype">int</span> start;
<a name="l03829"></a>03829     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03830"></a>03830         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03831"></a>03831         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03832"></a>03832     }
<a name="l03833"></a>03833     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03834"></a>03834         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03835"></a>03835         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03836"></a>03836     }
<a name="l03837"></a>03837     str = values[0].string_value;
<a name="l03838"></a>03838     start = values[1].integer_value;
<a name="l03839"></a>03839     <span class="keywordflow">if</span> (start &lt; 0) {
<a name="l03840"></a>03840         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03841"></a>03841             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03842"></a>03842         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03843"></a>03843     }
<a name="l03844"></a>03844     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03845"></a>03845     result-&gt;string_value = p_arith_mid_bytes
<a name="l03846"></a>03846         (context, str, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)start, str-&gt;header.size);
<a name="l03847"></a>03847     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03848"></a>03848 }
<a name="l03849"></a>03849 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_mid_bytes_3
<a name="l03850"></a>03850     (p_context *context, p_arith_value *result,
<a name="l03851"></a>03851      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03852"></a>03852 {
<a name="l03853"></a>03853     p_term *str;
<a name="l03854"></a>03854     <span class="keywordtype">int</span> start;
<a name="l03855"></a>03855     <span class="keywordtype">int</span> length;
<a name="l03856"></a>03856     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l03857"></a>03857         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l03858"></a>03858         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03859"></a>03859     }
<a name="l03860"></a>03860     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03861"></a>03861         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l03862"></a>03862         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03863"></a>03863     }
<a name="l03864"></a>03864     <span class="keywordflow">if</span> (values[2].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l03865"></a>03865         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[2]);
<a name="l03866"></a>03866         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03867"></a>03867     }
<a name="l03868"></a>03868     str = values[0].string_value;
<a name="l03869"></a>03869     start = values[1].integer_value;
<a name="l03870"></a>03870     length = values[2].integer_value;
<a name="l03871"></a>03871     <span class="keywordflow">if</span> (start &lt; 0) {
<a name="l03872"></a>03872         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03873"></a>03873             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l03874"></a>03874         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03875"></a>03875     }
<a name="l03876"></a>03876     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l03877"></a>03877         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l03878"></a>03878             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[2]);
<a name="l03879"></a>03879         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l03880"></a>03880     }
<a name="l03881"></a>03881     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l03882"></a>03882     result-&gt;string_value = p_arith_mid_bytes
<a name="l03883"></a>03883         (context, str, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)start, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l03884"></a>03884     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03885"></a>03885 }
<a name="l03886"></a>03886 
<a name="l03912"></a>03912 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_nan
<a name="l03913"></a>03913     (p_context *context, p_arith_value *result,
<a name="l03914"></a>03914      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03915"></a>03915 {
<a name="l03916"></a>03916     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03917"></a>03917     result-&gt;real_value = 0.0 / 0.0;
<a name="l03918"></a>03918     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03919"></a>03919 }
<a name="l03920"></a>03920 
<a name="l03944"></a>03944 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_pi
<a name="l03945"></a>03945     (p_context *context, p_arith_value *result,
<a name="l03946"></a>03946      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l03947"></a>03947 {
<a name="l03948"></a>03948     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l03949"></a>03949     result-&gt;real_value = 3.14159265358979323846;
<a name="l03950"></a>03950     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l03951"></a>03951 }
<a name="l03952"></a>03952 
<a name="l04011"></a>04011 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_pow
<a name="l04012"></a>04012     (p_context *context, p_arith_value *result,
<a name="l04013"></a>04013      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04014"></a>04014 {
<a name="l04015"></a>04015     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04016"></a>04016         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04017"></a>04017             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04018"></a>04018             result-&gt;real_value =
<a name="l04019"></a>04019                 pow(values[0].integer_value, values[1].integer_value);
<a name="l04020"></a>04020             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04021"></a>04021         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04022"></a>04022             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04023"></a>04023             result-&gt;real_value =
<a name="l04024"></a>04024                 pow(values[0].integer_value, values[1].real_value);
<a name="l04025"></a>04025             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04026"></a>04026         } <span class="keywordflow">else</span> {
<a name="l04027"></a>04027             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l04028"></a>04028             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04029"></a>04029         }
<a name="l04030"></a>04030     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04031"></a>04031         <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04032"></a>04032             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04033"></a>04033             result-&gt;real_value =
<a name="l04034"></a>04034                 pow(values[0].real_value, values[1].real_value);
<a name="l04035"></a>04035             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04036"></a>04036         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[1].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04037"></a>04037             result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04038"></a>04038             result-&gt;real_value =
<a name="l04039"></a>04039                 pow(values[0].real_value, values[1].integer_value);
<a name="l04040"></a>04040             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04041"></a>04041         } <span class="keywordflow">else</span> {
<a name="l04042"></a>04042             *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[1]);
<a name="l04043"></a>04043             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04044"></a>04044         }
<a name="l04045"></a>04045     } <span class="keywordflow">else</span> {
<a name="l04046"></a>04046         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04047"></a>04047         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04048"></a>04048     }
<a name="l04049"></a>04049 }
<a name="l04050"></a>04050 
<a name="l04076"></a>04076 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_random
<a name="l04077"></a>04077     (p_context *context, p_arith_value *result,
<a name="l04078"></a>04078      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04079"></a>04079 {
<a name="l04080"></a>04080     context-&gt;random_seed = context-&gt;random_seed * 1103515245 + 12345;
<a name="l04081"></a>04081     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04082"></a>04082     result-&gt;real_value =
<a name="l04083"></a>04083         (((int)(context-&gt;random_seed)) &amp; 0x7FFFFFFF) / 2147483648.0;
<a name="l04084"></a>04084     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04085"></a>04085 }
<a name="l04086"></a>04086 
<a name="l04128"></a>04128 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_right
<a name="l04129"></a>04129     (p_context *context, p_arith_value *result,
<a name="l04130"></a>04130      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04131"></a>04131 {
<a name="l04132"></a>04132     p_term *str;
<a name="l04133"></a>04133     <span class="keywordtype">int</span> length;
<a name="l04134"></a>04134     <span class="keywordtype">size_t</span> str_len;
<a name="l04135"></a>04135     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l04136"></a>04136         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l04137"></a>04137         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04138"></a>04138     }
<a name="l04139"></a>04139     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04140"></a>04140         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l04141"></a>04141         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04142"></a>04142     }
<a name="l04143"></a>04143     str = values[0].string_value;
<a name="l04144"></a>04144     length = values[1].integer_value;
<a name="l04145"></a>04145     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l04146"></a>04146         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l04147"></a>04147             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l04148"></a>04148         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04149"></a>04149     }
<a name="l04150"></a>04150     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04151"></a>04151     str_len = <a class="code" href="group__term.html#gab6582e252c8a8333f4b03560f715e5fd" title="Returns the UTF-8 length of the name of the functor, predicate, atom, or variable...">p_term_name_length_utf8</a>(str);
<a name="l04152"></a>04152     <span class="keywordflow">if</span> (((<span class="keywordtype">size_t</span>)length) &gt;= str_len) {
<a name="l04153"></a>04153         result-&gt;string_value = str;
<a name="l04154"></a>04154     } <span class="keywordflow">else</span> {
<a name="l04155"></a>04155         result-&gt;string_value = p_arith_mid
<a name="l04156"></a>04156             (context, str, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(str_len - (<span class="keywordtype">size_t</span>)length),
<a name="l04157"></a>04157              (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l04158"></a>04158     }
<a name="l04159"></a>04159     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04160"></a>04160 }
<a name="l04161"></a>04161 
<a name="l04203"></a>04203 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_right_bytes
<a name="l04204"></a>04204     (p_context *context, p_arith_value *result,
<a name="l04205"></a>04205      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04206"></a>04206 {
<a name="l04207"></a>04207     p_term *str;
<a name="l04208"></a>04208     <span class="keywordtype">int</span> length;
<a name="l04209"></a>04209     <span class="keywordflow">if</span> (values[0].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l04210"></a>04210         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l04211"></a>04211         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04212"></a>04212     }
<a name="l04213"></a>04213     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04214"></a>04214         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l04215"></a>04215         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04216"></a>04216     }
<a name="l04217"></a>04217     str = values[0].string_value;
<a name="l04218"></a>04218     length = values[1].integer_value;
<a name="l04219"></a>04219     <span class="keywordflow">if</span> (length &lt; 0) {
<a name="l04220"></a>04220         *error = <a class="code" href="group__errors.html#ga6fdb196a0128991498276a8c358160c7" title="Creates a new domain error term from expected_domain and culprit within context.">p_create_domain_error</a>
<a name="l04221"></a>04221             (context, <span class="stringliteral">&quot;not_less_than_zero&quot;</span>, args[1]);
<a name="l04222"></a>04222         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04223"></a>04223     }
<a name="l04224"></a>04224     result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04225"></a>04225     <span class="keywordflow">if</span> (length &gt;= str-&gt;header.size) {
<a name="l04226"></a>04226         result-&gt;string_value = str;
<a name="l04227"></a>04227     } <span class="keywordflow">else</span> {
<a name="l04228"></a>04228         result-&gt;string_value = p_arith_mid_bytes
<a name="l04229"></a>04229             (context, str, str-&gt;header.size - (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length,
<a name="l04230"></a>04230              (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)length);
<a name="l04231"></a>04231     }
<a name="l04232"></a>04232     <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04233"></a>04233 }
<a name="l04234"></a>04234 
<a name="l04235"></a>04235 <span class="comment">/* Standardized rounding function that avoids system-specific</span>
<a name="l04236"></a>04236 <span class="comment"> * variations in round() and rint() */</span>
<a name="l04237"></a>04237 P_INLINE <span class="keywordtype">double</span> p_arith_round_nearest(<span class="keywordtype">double</span> x)
<a name="l04238"></a>04238 {
<a name="l04239"></a>04239     <span class="keywordflow">if</span> (x &gt;= 0.0) {
<a name="l04240"></a>04240         <span class="keywordtype">double</span> y = floor(x);
<a name="l04241"></a>04241         <span class="keywordflow">if</span> ((x - y) &gt;= 0.5)
<a name="l04242"></a>04242             <span class="keywordflow">return</span> ceil(x);
<a name="l04243"></a>04243         <span class="keywordflow">else</span>
<a name="l04244"></a>04244             <span class="keywordflow">return</span> y;
<a name="l04245"></a>04245     } <span class="keywordflow">else</span> {
<a name="l04246"></a>04246         <span class="keywordtype">double</span> y = ceil(x);
<a name="l04247"></a>04247         <span class="keywordflow">if</span> ((x - y) &lt;= -0.5)
<a name="l04248"></a>04248             <span class="keywordflow">return</span> floor(x);
<a name="l04249"></a>04249         <span class="keywordflow">else</span>
<a name="l04250"></a>04250             <span class="keywordflow">return</span> y;
<a name="l04251"></a>04251     }
<a name="l04252"></a>04252 }
<a name="l04253"></a>04253 
<a name="l04299"></a>04299 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_round
<a name="l04300"></a>04300     (p_context *context, p_arith_value *result,
<a name="l04301"></a>04301      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04302"></a>04302 {
<a name="l04303"></a>04303     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04304"></a>04304         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l04305"></a>04305         result-&gt;integer_value = values[0].integer_value;
<a name="l04306"></a>04306         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04307"></a>04307     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04308"></a>04308         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04309"></a>04309         result-&gt;real_value =
<a name="l04310"></a>04310             p_arith_round_nearest(values[0].real_value);
<a name="l04311"></a>04311         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04312"></a>04312     } <span class="keywordflow">else</span> {
<a name="l04313"></a>04313         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04314"></a>04314         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04315"></a>04315     }
<a name="l04316"></a>04316 }
<a name="l04317"></a>04317 
<a name="l04355"></a>04355 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_sign
<a name="l04356"></a>04356     (p_context *context, p_arith_value *result,
<a name="l04357"></a>04357      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04358"></a>04358 {
<a name="l04359"></a>04359     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04360"></a>04360         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l04361"></a>04361         <span class="keywordflow">if</span> (values[0].integer_value &lt; 0)
<a name="l04362"></a>04362             result-&gt;integer_value = -1;
<a name="l04363"></a>04363         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].integer_value &gt; 0)
<a name="l04364"></a>04364             result-&gt;integer_value = 1;
<a name="l04365"></a>04365         <span class="keywordflow">else</span>
<a name="l04366"></a>04366             result-&gt;integer_value = 0;
<a name="l04367"></a>04367         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04368"></a>04368     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04369"></a>04369         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>;
<a name="l04370"></a>04370         <span class="keywordflow">if</span> (values[0].real_value &lt; 0.0)
<a name="l04371"></a>04371             result-&gt;integer_value = -1;
<a name="l04372"></a>04372         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].real_value &gt; 0.0)
<a name="l04373"></a>04373             result-&gt;integer_value = 1;
<a name="l04374"></a>04374         <span class="keywordflow">else</span>
<a name="l04375"></a>04375             result-&gt;integer_value = 0;
<a name="l04376"></a>04376         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04377"></a>04377     } <span class="keywordflow">else</span> {
<a name="l04378"></a>04378         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04379"></a>04379         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04380"></a>04380     }
<a name="l04381"></a>04381 }
<a name="l04382"></a>04382 
<a name="l04422"></a>04422 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_sin
<a name="l04423"></a>04423     (p_context *context, p_arith_value *result,
<a name="l04424"></a>04424      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04425"></a>04425 {
<a name="l04426"></a>04426     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04427"></a>04427         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04428"></a>04428         result-&gt;real_value = sin((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l04429"></a>04429         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04430"></a>04430     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04431"></a>04431         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04432"></a>04432         result-&gt;real_value = sin(values[0].real_value);
<a name="l04433"></a>04433         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04434"></a>04434     } <span class="keywordflow">else</span> {
<a name="l04435"></a>04435         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04436"></a>04436         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04437"></a>04437     }
<a name="l04438"></a>04438 }
<a name="l04439"></a>04439 
<a name="l04478"></a>04478 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_sqrt
<a name="l04479"></a>04479     (p_context *context, p_arith_value *result,
<a name="l04480"></a>04480      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04481"></a>04481 {
<a name="l04482"></a>04482     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04483"></a>04483         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04484"></a>04484         result-&gt;real_value = sqrt((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l04485"></a>04485         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04486"></a>04486     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04487"></a>04487         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04488"></a>04488         result-&gt;real_value = sqrt(values[0].real_value);
<a name="l04489"></a>04489         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04490"></a>04490     } <span class="keywordflow">else</span> {
<a name="l04491"></a>04491         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04492"></a>04492         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04493"></a>04493     }
<a name="l04494"></a>04494 }
<a name="l04495"></a>04495 
<a name="l04532"></a>04532 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_string
<a name="l04533"></a>04533     (p_context *context, p_arith_value *result,
<a name="l04534"></a>04534      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04535"></a>04535 {
<a name="l04536"></a>04536     <span class="keywordtype">char</span> buffer[128];
<a name="l04537"></a>04537     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04538"></a>04538         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04539"></a>04539         snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;%d&quot;</span>, values[0].integer_value);
<a name="l04540"></a>04540         result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, buffer);
<a name="l04541"></a>04541         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04542"></a>04542     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04543"></a>04543         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04544"></a>04544         <span class="keywordflow">if</span> (isnan(values[0].real_value)) {
<a name="l04545"></a>04545             result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;nan&quot;</span>);
<a name="l04546"></a>04546             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04547"></a>04547         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isinf(values[0].real_value) != 0) {
<a name="l04548"></a>04548             <span class="keywordflow">if</span> (values[0].real_value &lt; 0)
<a name="l04549"></a>04549                 result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;-inf&quot;</span>);
<a name="l04550"></a>04550             <span class="keywordflow">else</span>
<a name="l04551"></a>04551                 result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;inf&quot;</span>);
<a name="l04552"></a>04552             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04553"></a>04553         }
<a name="l04554"></a>04554         snprintf(buffer, <span class="keyword">sizeof</span>(buffer) - 8,
<a name="l04555"></a>04555                  <span class="stringliteral">&quot;%.10g&quot;</span>, values[0].real_value);
<a name="l04556"></a>04556         <span class="keywordflow">if</span> (strchr(buffer, <span class="charliteral">&apos;.&apos;</span>) == 0 &amp;&amp; strchr(buffer, <span class="charliteral">&apos;e&apos;</span>) == 0) {
<a name="l04557"></a>04557             <span class="comment">/* Must have a decimal spec for floating-point values */</span>
<a name="l04558"></a>04558             strcat(buffer, <span class="stringliteral">&quot;.0&quot;</span>);
<a name="l04559"></a>04559         }
<a name="l04560"></a>04560         result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, buffer);
<a name="l04561"></a>04561         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04562"></a>04562     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l04563"></a>04563         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04564"></a>04564         result-&gt;string_value = values[0].string_value;
<a name="l04565"></a>04565         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04566"></a>04566     } <span class="keywordflow">else</span> {
<a name="l04567"></a>04567         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l04568"></a>04568         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04569"></a>04569     }
<a name="l04570"></a>04570 }
<a name="l04571"></a>04571 
<a name="l04608"></a>04608 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_string_2
<a name="l04609"></a>04609     (p_context *context, p_arith_value *result,
<a name="l04610"></a>04610      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04611"></a>04611 {
<a name="l04612"></a>04612     <span class="keywordtype">char</span> prec[64];
<a name="l04613"></a>04613     <span class="keywordtype">char</span> buffer[128];
<a name="l04614"></a>04614     <span class="keywordflow">if</span> (values[1].type != <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04615"></a>04615         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;integer&quot;</span>, args[1]);
<a name="l04616"></a>04616         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04617"></a>04617     }
<a name="l04618"></a>04618     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04619"></a>04619         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04620"></a>04620         snprintf(buffer, <span class="keyword">sizeof</span>(buffer), <span class="stringliteral">&quot;%d&quot;</span>, values[0].integer_value);
<a name="l04621"></a>04621         result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, buffer);
<a name="l04622"></a>04622         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04623"></a>04623     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04624"></a>04624         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04625"></a>04625         <span class="keywordflow">if</span> (isnan(values[0].real_value)) {
<a name="l04626"></a>04626             result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;nan&quot;</span>);
<a name="l04627"></a>04627             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04628"></a>04628         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isinf(values[0].real_value) != 0) {
<a name="l04629"></a>04629             <span class="keywordflow">if</span> (values[0].real_value &lt; 0)
<a name="l04630"></a>04630                 result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;-inf&quot;</span>);
<a name="l04631"></a>04631             <span class="keywordflow">else</span>
<a name="l04632"></a>04632                 result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, <span class="stringliteral">&quot;inf&quot;</span>);
<a name="l04633"></a>04633             <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04634"></a>04634         }
<a name="l04635"></a>04635         snprintf(prec, <span class="keyword">sizeof</span>(prec), <span class="stringliteral">&quot;%%.%dg&quot;</span>, values[1].integer_value);
<a name="l04636"></a>04636         snprintf(buffer, <span class="keyword">sizeof</span>(buffer) - 8,
<a name="l04637"></a>04637                  prec, values[0].real_value);
<a name="l04638"></a>04638         <span class="keywordflow">if</span> (strchr(buffer, <span class="charliteral">&apos;.&apos;</span>) == 0 &amp;&amp; strchr(buffer, <span class="charliteral">&apos;e&apos;</span>) == 0) {
<a name="l04639"></a>04639             <span class="comment">/* Must have a decimal spec for floating-point values */</span>
<a name="l04640"></a>04640             strcat(buffer, <span class="stringliteral">&quot;.0&quot;</span>);
<a name="l04641"></a>04641         }
<a name="l04642"></a>04642         result-&gt;string_value = <a class="code" href="group__term.html#ga07c94636569314c0d219497aa61ab925" title="Creates a string within context with the specified str value.">p_term_create_string</a>(context, buffer);
<a name="l04643"></a>04643         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04644"></a>04644     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>) {
<a name="l04645"></a>04645         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55baf4d3e8fa837de36d81c47851e2c9ac60">P_TERM_STRING</a>;
<a name="l04646"></a>04646         result-&gt;string_value = values[0].string_value;
<a name="l04647"></a>04647         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04648"></a>04648     } <span class="keywordflow">else</span> {
<a name="l04649"></a>04649         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;string&quot;</span>, args[0]);
<a name="l04650"></a>04650         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04651"></a>04651     }
<a name="l04652"></a>04652 }
<a name="l04653"></a>04653 
<a name="l04690"></a>04690 <span class="keyword">static</span> <a class="code" href="group__context.html#ga52e3fd878090e61233c8e96223fea7a0">p_goal_result</a> p_arith_tan
<a name="l04691"></a>04691     (p_context *context, p_arith_value *result,
<a name="l04692"></a>04692      <span class="keyword">const</span> p_arith_value *values, p_term **args, p_term **error)
<a name="l04693"></a>04693 {
<a name="l04694"></a>04694     <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55ba388c88e6b984687017b3cfdd7ef6c120">P_TERM_INTEGER</a>) {
<a name="l04695"></a>04695         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04696"></a>04696         result-&gt;real_value = tan((<span class="keywordtype">double</span>)(values[0].integer_value));
<a name="l04697"></a>04697         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04698"></a>04698     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (values[0].type == <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>) {
<a name="l04699"></a>04699         result-&gt;type = <a class="code" href="group__term.html#ga06fc87d81c62e9abb8790b6e5713c55bafd7125ad4718fd333c31c8fb1e839c2b">P_TERM_REAL</a>;
<a name="l04700"></a>04700         result-&gt;real_value = tan(values[0].real_value);
<a name="l04701"></a>04701         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0abd034ee80e2e27dd52bf3fc66cfcd215">P_RESULT_TRUE</a>;
<a name="l04702"></a>04702     } <span class="keywordflow">else</span> {
<a name="l04703"></a>04703         *error = <a class="code" href="group__errors.html#gacafaafb990e8dcd9972b93b4f10b8589" title="Creates a new type error term from expected_type and culprit within context.">p_create_type_error</a>(context, <span class="stringliteral">&quot;number&quot;</span>, args[0]);
<a name="l04704"></a>04704         <span class="keywordflow">return</span> <a class="code" href="group__context.html#gga52e3fd878090e61233c8e96223fea7a0aba638a23fa467a3f80ebfa33611ba6b7">P_RESULT_ERROR</a>;
<a name="l04705"></a>04705     }
<a name="l04706"></a>04706 }
<a name="l04707"></a>04707 
<a name="l04708"></a>04708 <span class="keywordtype">void</span> _p_db_init_arith(p_context *context)
<a name="l04709"></a>04709 {
<a name="l04710"></a>04710     <span class="keyword">static</span> <span class="keyword">struct </span>p_builtin const builtins[] = {
<a name="l04711"></a>04711         <span class="comment">/* Predicates */</span>
<a name="l04712"></a>04712         {<span class="stringliteral">&quot;is&quot;</span>, 2, p_builtin_is},
<a name="l04713"></a>04713         {<span class="stringliteral">&quot;=:=&quot;</span>, 2, p_builtin_num_eq},
<a name="l04714"></a>04714         {<span class="stringliteral">&quot;=!=&quot;</span>, 2, p_builtin_num_ne},
<a name="l04715"></a>04715         {<span class="stringliteral">&quot;=\\=&quot;</span>, 2, p_builtin_num_ne},
<a name="l04716"></a>04716         {<span class="stringliteral">&quot;&lt;&quot;</span>, 2, p_builtin_num_lt},
<a name="l04717"></a>04717         {<span class="stringliteral">&quot;&lt;=&quot;</span>, 2, p_builtin_num_le},
<a name="l04718"></a>04718         {<span class="stringliteral">&quot;=&lt;&quot;</span>, 2, p_builtin_num_le},
<a name="l04719"></a>04719         {<span class="stringliteral">&quot;&gt;&quot;</span>, 2, p_builtin_num_gt},
<a name="l04720"></a>04720         {<span class="stringliteral">&quot;&gt;=&quot;</span>, 2, p_builtin_num_ge},
<a name="l04721"></a>04721         {<span class="stringliteral">&quot;atom_name&quot;</span>, 2, p_builtin_atom_name},
<a name="l04722"></a>04722         {<span class="stringliteral">&quot;fperror&quot;</span>, 1, p_builtin_fperror},
<a name="l04723"></a>04723         {<span class="stringliteral">&quot;isnan&quot;</span>, 1, p_builtin_isnan},
<a name="l04724"></a>04724         {<span class="stringliteral">&quot;isinf&quot;</span>, 1, p_builtin_isinf},
<a name="l04725"></a>04725         {<span class="stringliteral">&quot;randomize&quot;</span>, 0, p_builtin_randomize_0},
<a name="l04726"></a>04726         {<span class="stringliteral">&quot;randomize&quot;</span>, 1, p_builtin_randomize_1},
<a name="l04727"></a>04727         {0, 0, 0}
<a name="l04728"></a>04728     };
<a name="l04729"></a>04729     <span class="keyword">static</span> <span class="keyword">struct </span>p_arith const ariths[] = {
<a name="l04730"></a>04730         <span class="comment">/* Functions */</span>
<a name="l04731"></a>04731         {<span class="stringliteral">&quot;+&quot;</span>, 2, p_arith_add},
<a name="l04732"></a>04732         {<span class="stringliteral">&quot;-&quot;</span>, 1, p_arith_neg},
<a name="l04733"></a>04733         {<span class="stringliteral">&quot;-&quot;</span>, 2, p_arith_sub},
<a name="l04734"></a>04734         {<span class="stringliteral">&quot;*&quot;</span>, 2, p_arith_mul},
<a name="l04735"></a>04735         {<span class="stringliteral">&quot;/&quot;</span>, 2, p_arith_div},
<a name="l04736"></a>04736         {<span class="stringliteral">&quot;%&quot;</span>, 2, p_arith_mod},
<a name="l04737"></a>04737         {<span class="stringliteral">&quot;**&quot;</span>, 2, p_arith_pow},
<a name="l04738"></a>04738         {<span class="stringliteral">&quot;/\\&quot;</span>, 2, p_arith_and},
<a name="l04739"></a>04739         {<span class="stringliteral">&quot;\\/&quot;</span>, 2, p_arith_or},
<a name="l04740"></a>04740         {<span class="stringliteral">&quot;^&quot;</span>, 2, p_arith_xor},
<a name="l04741"></a>04741         {<span class="stringliteral">&quot;~&quot;</span>, 1, p_arith_not},
<a name="l04742"></a>04742         {<span class="stringliteral">&quot;\\&quot;</span>, 1, p_arith_not},
<a name="l04743"></a>04743         {<span class="stringliteral">&quot;&lt;&lt;&quot;</span>, 2, p_arith_lshift},
<a name="l04744"></a>04744         {<span class="stringliteral">&quot;&gt;&gt;&quot;</span>, 2, p_arith_rshift},
<a name="l04745"></a>04745         {<span class="stringliteral">&quot;&gt;&gt;&gt;&quot;</span>, 2, p_arith_rushift},
<a name="l04746"></a>04746         {<span class="stringliteral">&quot;abs&quot;</span>, 1, p_arith_abs},
<a name="l04747"></a>04747         {<span class="stringliteral">&quot;acos&quot;</span>, 1, p_arith_acos},
<a name="l04748"></a>04748         {<span class="stringliteral">&quot;asin&quot;</span>, 1, p_arith_asin},
<a name="l04749"></a>04749         {<span class="stringliteral">&quot;atan&quot;</span>, 1, p_arith_atan},
<a name="l04750"></a>04750         {<span class="stringliteral">&quot;atan2&quot;</span>, 2, p_arith_atan2},
<a name="l04751"></a>04751         {<span class="stringliteral">&quot;byte&quot;</span>, 2, p_arith_byte},
<a name="l04752"></a>04752         {<span class="stringliteral">&quot;byte_to_string&quot;</span>, 1, p_arith_byte_to_string},
<a name="l04753"></a>04753         {<span class="stringliteral">&quot;ceil&quot;</span>, 1, p_arith_ceil},
<a name="l04754"></a>04754         {<span class="stringliteral">&quot;ceiling&quot;</span>, 1, p_arith_ceil},
<a name="l04755"></a>04755         {<span class="stringliteral">&quot;char&quot;</span>, 2, p_arith_char},
<a name="l04756"></a>04756         {<span class="stringliteral">&quot;char_to_string&quot;</span>, 1, p_arith_char_to_string},
<a name="l04757"></a>04757         {<span class="stringliteral">&quot;cos&quot;</span>, 1, p_arith_cos},
<a name="l04758"></a>04758         {<span class="stringliteral">&quot;e&quot;</span>, 0, p_arith_e},
<a name="l04759"></a>04759         {<span class="stringliteral">&quot;exp&quot;</span>, 1, p_arith_exp},
<a name="l04760"></a>04760         {<span class="stringliteral">&quot;float&quot;</span>, 1, p_arith_float},
<a name="l04761"></a>04761         {<span class="stringliteral">&quot;float_fractional_part&quot;</span>, 1, p_arith_float_fractional_part},
<a name="l04762"></a>04762         {<span class="stringliteral">&quot;float_integer_part&quot;</span>, 1, p_arith_float_integer_part},
<a name="l04763"></a>04763         {<span class="stringliteral">&quot;floor&quot;</span>, 1, p_arith_floor},
<a name="l04764"></a>04764         {<span class="stringliteral">&quot;inf&quot;</span>, 0, p_arith_inf},
<a name="l04765"></a>04765         {<span class="stringliteral">&quot;integer&quot;</span>, 1, p_arith_integer},
<a name="l04766"></a>04766         {<span class="stringliteral">&quot;left&quot;</span>, 2, p_arith_left},
<a name="l04767"></a>04767         {<span class="stringliteral">&quot;left_bytes&quot;</span>, 2, p_arith_left_bytes},
<a name="l04768"></a>04768         {<span class="stringliteral">&quot;length&quot;</span>, 1, p_arith_length},
<a name="l04769"></a>04769         {<span class="stringliteral">&quot;length_bytes&quot;</span>, 1, p_arith_length_bytes},
<a name="l04770"></a>04770         {<span class="stringliteral">&quot;log&quot;</span>, 1, p_arith_log},
<a name="l04771"></a>04771         {<span class="stringliteral">&quot;mid&quot;</span>, 2, p_arith_mid_2},
<a name="l04772"></a>04772         {<span class="stringliteral">&quot;mid&quot;</span>, 3, p_arith_mid_3},
<a name="l04773"></a>04773         {<span class="stringliteral">&quot;mid_bytes&quot;</span>, 2, p_arith_mid_bytes_2},
<a name="l04774"></a>04774         {<span class="stringliteral">&quot;mid_bytes&quot;</span>, 3, p_arith_mid_bytes_3},
<a name="l04775"></a>04775         {<span class="stringliteral">&quot;mod&quot;</span>, 2, p_arith_mod},
<a name="l04776"></a>04776         {<span class="stringliteral">&quot;nan&quot;</span>, 0, p_arith_nan},
<a name="l04777"></a>04777         {<span class="stringliteral">&quot;pi&quot;</span>, 0, p_arith_pi},
<a name="l04778"></a>04778         {<span class="stringliteral">&quot;pow&quot;</span>, 2, p_arith_pow},
<a name="l04779"></a>04779         {<span class="stringliteral">&quot;random&quot;</span>, 0, p_arith_random},
<a name="l04780"></a>04780         {<span class="stringliteral">&quot;rem&quot;</span>, 2, p_arith_rem},
<a name="l04781"></a>04781         {<span class="stringliteral">&quot;right&quot;</span>, 2, p_arith_right},
<a name="l04782"></a>04782         {<span class="stringliteral">&quot;right_bytes&quot;</span>, 2, p_arith_right_bytes},
<a name="l04783"></a>04783         {<span class="stringliteral">&quot;round&quot;</span>, 1, p_arith_round},
<a name="l04784"></a>04784         {<span class="stringliteral">&quot;sign&quot;</span>, 1, p_arith_sign},
<a name="l04785"></a>04785         {<span class="stringliteral">&quot;sin&quot;</span>, 1, p_arith_sin},
<a name="l04786"></a>04786         {<span class="stringliteral">&quot;sqrt&quot;</span>, 1, p_arith_sqrt},
<a name="l04787"></a>04787         {<span class="stringliteral">&quot;string&quot;</span>, 1, p_arith_string},
<a name="l04788"></a>04788         {<span class="stringliteral">&quot;string&quot;</span>, 2, p_arith_string_2},
<a name="l04789"></a>04789         {<span class="stringliteral">&quot;tan&quot;</span>, 1, p_arith_tan},
<a name="l04790"></a>04790         {<span class="stringliteral">&quot;truncate&quot;</span>, 1, p_arith_integer},
<a name="l04791"></a>04791         {0, 0, 0}
<a name="l04792"></a>04792     };
<a name="l04793"></a>04793     _p_db_register_builtins(context, builtins);
<a name="l04794"></a>04794     _p_db_register_ariths(context, ariths);
<a name="l04795"></a>04795 }
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 26 May 2011 for plang by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
