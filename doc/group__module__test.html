<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>plang: Modules - test</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Modules - test</h1><table border="0" cellpadding="0" cellspacing="0">
</table>
<p>The <code>test</code> module provides convenience predicates for writing unit tests in Plang. The following is a simple example for testing the <a class="el" href="group__sorting.html#sort_2">sort/2</a> and <a class="el" href="group__sorting.html#sortd_2">sortd/2</a> predicates:</p>
<div class="fragment"><pre class="fragment">:- <span class="keyword">import</span>(test).

test(sort)
{
    verify(sort([a, y, b, m], [a, b, m, y]));
    verify_error(sort(L, S), instantiation_error);
}

test(sortd)
{
    verify(sortd([a, y, b, m], [y, m, b, a]));
    verify_error(sortd(L, S), instantiation_error);
}
</pre></div><p>All test predicates should be declared as <code>test(<em>Name</em>)</code> where <em>Name</em> is an atom that uniquely identifies the test. Multiple test predicates can be declared in the same application, which will be executed when <a class="el" href="group__module__test.html#test_main_1">test::main/1</a> is called:</p>
<div class="fragment"><pre class="fragment">main(Args)
{
    test::main(Args);
}
</pre></div><p>As an alternative to providing a declaration for <b>main/1</b>, the <b>-m</b> option can be specified on the <a class="el" href="plang_manpage.html">plang</a> command-line:</p>
<div class="fragment"><pre class="fragment">plang -mtest::main test-sort.lp
</pre></div><p>The output of running the unit test will look something like this:</p>
<div class="fragment"><pre class="fragment">test-sort: sort: ok                                                     
test-sort: sortd: ok                                                    
test-sort: 2 passed, 0 failed                                           
</pre></div><p><a class="el" href="group__module__test.html#compare_2">compare/2</a>, <a class="el" href="group__module__test.html#fail_1">fail/1</a>, <a class="el" href="group__module__test.html#fail_2">fail/2</a>, <a class="el" href="group__module__test.html#verify_1">verify/1</a>, <a class="el" href="group__module__test.html#verify_error_2">verify_error/2</a>, <a class="el" href="group__module__test.html#verify_fuzzy_1">verify_fuzzy/1</a>, <a class="el" href="group__module__test.html#verify_var_error_2">verify_var_error/2</a>, <a class="el" href="group__module__test.html#test_main_1">test::main/1</a></p>
<hr/>
 <a class="anchor" id="compare_2"></a> <b>compare/2</b> - compares two values for equality.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>compare</b>(<em>Actual</em>, <em>Expected</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Compares <em>Actual</em> with <em>Expected</em> using <a class="el" href="group__term__comparison.html#term_eq_2">(==)/2</a>. Aborts the current unit test with an error if the comparison fails.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">X is 2 + 2;
compare(X, 4);
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__module__test.html#fail_1">fail/1</a>, <a class="el" href="group__module__test.html#verify_1">verify/1</a></dd></dl>
<hr/>
 <a class="anchor" id="fail_1"></a> <b>fail/1</b> - fails the current unit test with a message.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>fail</b>(<em>Message</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Fails the current unit test and displays the string <em>Message</em> in the error log. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>If the test executes <a class="el" href="group__logic__and__control.html#fail_0">fail/0</a>, then the effect will be equivalent to calling <b>fail/1</b> with a generic error message.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">fail(<span class="stringliteral">&quot;resource not found&quot;</span>);
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__logic__and__control.html#fail_0">fail/0</a>, <a class="el" href="group__module__test.html#fail_2">fail/2</a></dd></dl>
<hr/>
 <a class="anchor" id="fail_2"></a> <b>fail/2</b> - fails the current unit test with two messages.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>fail</b>(<em>Message1</em>, <em>Message2</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Fails the current unit test and displays the strings <em>Message</em> and <em>Message2</em> in the error log.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">fail(2 + 2 =:= 4, <span class="stringliteral">&quot;arithmetic failure&quot;</span>);
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__logic__and__control.html#fail_0">fail/0</a>, <a class="el" href="group__module__test.html#fail_1">fail/1</a></dd></dl>
<hr/>
 <a class="anchor" id="verify_1"></a> <b>verify/1</b> - verifies that a condition is true.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>verify</b>(<em>Goal</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Executes <em>Goal</em> and succeeds if it succeeds. If <em>Goal</em> fails or throws an error, then the current unit test will be aborted with an error.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">verify(fail);
verify(2 + 2 =:= 4);
verify(abs(1.0 / 3.0 - 0.333333) &lt;= 0.00001);
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__module__test.html#compare_2">compare/2</a>, <a class="el" href="group__module__test.html#fail_1">fail/1</a>, <a class="el" href="group__module__test.html#verify_error_2">verify_error/2</a></dd></dl>
<hr/>
 <a class="anchor" id="verify_error_2"></a> <b>verify_error/2</b> - verifies that a goal throws an expected error.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>verify_error</b>(<em>Goal</em>, <em>ExpectedError</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Executes <em>Goal</em> and succeeds if it throws the term <code>error(<em>ExpectedError</em>, _)</code>. Otherwise the current unit test will be aborted with an error. </dd></dl>
<dl class="user"><dt><b></b></dt><dd><em>ExpectedError</em> must be a ground term because it is compared to the actual error using <a class="el" href="group__term__comparison.html#term_eq_2">(==)/2</a>. If <em>ExpectedError</em> involves variables then the test will fail. Use <a class="el" href="group__module__test.html#verify_var_error_2">verify_var_error/2</a> instead to check for errors that involve variables.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">verify_error(X is 2 + <span class="stringliteral">&quot;3&quot;</span>, type_error(number, <span class="stringliteral">&quot;3&quot;</span>));
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__module__test.html#fail_1">fail/1</a>, <a class="el" href="group__module__test.html#verify_1">verify/1</a>, <a class="el" href="group__module__test.html#verify_var_error_2">verify_var_error/2</a></dd></dl>
<hr/>
 <a class="anchor" id="verify_fuzzy_1"></a> <b>verify_fuzzy/1</b> - verifies that the current fuzzy confidence value is as expected.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>verify_fuzzy</b>(<em>Expected</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Evaluates <em>Expected</em> according to the rules of <a class="el" href="group__arithmetic.html#is_2">is/2</a> and compares it with the current fuzzy confidence value from <a class="el" href="group__fuzzy__logic.html#fuzzy_1">fuzzy/1</a>. Succeeds if the two values are within 0.0001 of each other. Otherwise the current unit test will be aborted with an error. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>This predicate is intended for testing code that involves <a class="el" href="group__fuzzy__logic.html">fuzzy logic</a>.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">verify_fuzzy(0.5);
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__module__test.html#verify_1">verify/1</a>, <a class="el" href="group__fuzzy__logic.html#fuzzy_1">fuzzy/1</a></dd></dl>
<hr/>
 <a class="anchor" id="verify_var_error_2"></a> <b>verify_var_error/2</b> - verifies that a goal throws an expected error that involves variables.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>verify_var_error</b>(<em>Goal</em>, <em>ExpectedError</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Executes <em>Goal</em> and succeeds if it throws a term that can be unified with <code>error(<em>ExpectedError</em>, _)</code>. Otherwise the current unit test will be aborted with an error.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">verify_var_error(fuzzy(1.0, [H]), type_error(interval_list, [H]));
</pre></div></dd></dl>
<dl class="user"><dt><b>See Also</b></dt><dd><a class="el" href="group__module__test.html#fail_1">fail/1</a>, <a class="el" href="group__module__test.html#verify_1">verify/1</a>, <a class="el" href="group__module__test.html#verify_error_2">verify_error/2</a></dd></dl>
<hr/>
 <a class="anchor" id="test_main_1"></a> <b>test::main/1</b> - runs all unit tests and reports their results.</p>
<dl class="user"><dt><b>Usage</b></dt><dd><b>test::main</b>(<em>Args</em>)</dd></dl>
<dl class="user"><dt><b>Description</b></dt><dd>Runs all of the unit tests that have been registered with the dynamic <b>test/1</b> predicate. The <em>Args</em> are the command-line arguments from the operating system. The first element of <em>Args</em> is stripped to its base name and then used as the name of the "suite" that is being run. </dd></dl>
<dl class="user"><dt><b></b></dt><dd>If one or more unit tests produce an error, then <b>test::main/1</b> will fail. If all unit tests pass, then <b>test::main/1</b> succeeds.</dd></dl>
<dl class="user"><dt><b>Examples</b></dt><dd><div class="fragment"><pre class="fragment">main(Args)
{
    test::main(Args);
}
</pre></div> </dd></dl>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 26 May 2011 for plang by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
